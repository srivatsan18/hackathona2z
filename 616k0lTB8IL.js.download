(function(R){var D=window.AmazonUIPageJS||window.P,V=D._namespace||D.attributeErrors,b=V?V("MultiEmailControlAssets_AUIBuild",""):D;b.guardFatal?b.guardFatal(R)(b,window):b.execute(function(){R(b,window)})})(function(R,D,V){!function(b){function c(d){if(a[d])return a[d].exports;var e=a[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}var a={};c.m=b;c.c=a;c.d=function(a,b,f){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:f})};c.r=function(a){"undefined"!=
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})};c.t=function(a,b){if((1&b&&(a=c(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var f=Object.create(null);if(c.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var g in a)c.d(f,g,function(b){return a[b]}.bind(null,g));return f};c.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};
return c.d(b,"a",b),b};c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};c.p="";c(c.s=240)}([function(b,c,a){a.d(c,"j",function(){return g});a.d(c,"h",function(){return h});a.d(c,"i",function(){return k});a.d(c,"f",function(){return q});a.d(c,"k",function(){return p});a.d(c,"n",function(){return n});a.d(c,"a",function(){return m});a.d(c,"b",function(){return v});a.d(c,"c",function(){return t});a.d(c,"m",function(){return l});a.d(c,"l",function(){return u});a.d(c,"d",function(){return r});
a.d(c,"e",function(){return w});a.d(c,"g",function(){return y});b=a(20);var d=a.n(b);b=a(14);var e=a.n(b),f={id:1,className:1,textContent:1,innerHTML:1},g=function(a){return e()(a).reduce(function(b,d){return b+"\x26"+d+"\x3d"+a[d]},"")},h=function(a){return"object"===(void 0===a?"undefined":d()(a))&&null!==a},k=function(){},q=function(a){return h(a)&&void 0!==a.nodeName},p=function(a,b,d){return void 0!==document.addEventListener?(a.addEventListener(b,d),!0):!(void 0!==document.addEventListener||
!document.attachEvent)&&(a.attachEvent("on"+b,d),!0)},n=function(a,b,d){return void 0!==document.removeEventListener?(a.removeEventListener(b,d),!0):!(void 0!==document.removeEventListener||!document.detachEvent)&&(a.detachEvent("on"+b,d),!0)},m=function(a,b){v(a,b)||(a.className+=" "+b)},v=function(a,b){return 0<a.className.split(" ").filter(function(a){return a===b}).length},t=function(a,b){var d=a.className.split(" ");a.className=d.filter(function(a){return a!==b}).join(" ")},l=function(a){return a.split(/<(.*?)>/)},
u=function(a){return a.split(/;|,|\t|\n| /).filter(function(a){return 0<a.length})},r=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=document.createElement(a);return e()(b).map(function(a){f[a]?d[a]=b[a]:d.setAttribute(a,b[a])}),d},w=function(a){return"Function"==typeof a?setTimeout(a,0):""},y=function(a,b){b=b.split(".");if(void 0===a)return!1;for(b.shift();0<b.length;){if(void 0===a[b[0]])return!1;a=a[b[0]];b.shift()}return!0}},function(b,c,a){a.d(c,"i",function(){return d});
a.d(c,"f",function(){return e});a.d(c,"j",function(){return f});a.d(c,"s",function(){return g});a.d(c,"I",function(){return h});a.d(c,"g",function(){return k});a.d(c,"k",function(){return q});a.d(c,"l",function(){return p});a.d(c,"J",function(){return n});a.d(c,"e",function(){return m});a.d(c,"h",function(){return v});a.d(c,"c",function(){return t});a.d(c,"b",function(){return l});a.d(c,"d",function(){return u});a.d(c,"v",function(){return r});a.d(c,"w",function(){return w});a.d(c,"x",function(){return y});
a.d(c,"H",function(){return A});a.d(c,"o",function(){return z});a.d(c,"L",function(){return x});a.d(c,"m",function(){return M});a.d(c,"a",function(){return O});a.d(c,"z",function(){return F});a.d(c,"u",function(){return G});a.d(c,"n",function(){return E});a.d(c,"r",function(){return J});a.d(c,"y",function(){return H});a.d(c,"D",function(){return K});a.d(c,"M",function(){return C});a.d(c,"t",function(){return N});a.d(c,"K",function(){return B});a.d(c,"C",function(){return I});a.d(c,"F",function(){return Q});
a.d(c,"B",function(){return W});a.d(c,"G",function(){return T});a.d(c,"A",function(){return P});a.d(c,"E",function(){return U});a.d(c,"p",function(){return L});a.d(c,"q",function(){return S});var d="ARIA_EMAIL_SELECTED_INVALID",e="ARIA_EMAIL_SELECTED_DUPE",f="ARIA_EMAIL_SELECTED_TOO_LONG",g="EMAIL_EXAMPLE",h="PLACEHOLDER_TEXT",k="ARIA_EMAIL_SELECTED_INDEX",q="ARIA_TEXT_ENTRY_ERR",p="ARIA_TEXT_ENTRY_INSTRUCT",n="SELECTED_EMAILS",m="ARIA_EMAIL_SELECTED",v="ARIA_EMAIL_SELECTED_INSTRUCT",t="ARIA_EMAIL_EDITING_INSTRUCT",
l="ARIA_EMAIL_DELETED",u="ARIA_EMAIL_REMOVE",r="ERROR",w="FATAL",y="HAS_ERRORS",A="NOT_FOUND",z=20,x=3E3,M=3,O=999,F=255,G="emailParsed",E="bulkEntry",J="emailCount",H="maxEmailCount",K="mec",C="mec_uuid_",N="__sif_mec_email_",B="T1",I="mec-emails-instruction",Q="mec-quantity-how-it-works-label",W="mec-desktop-instructions-keyboard-nav-label",T="mec-selected",P="mec-aria-errors-label",U="mec",L="aok-hidden",S="aok-offscreen"},function(b,c,a){c.__esModule=!0;c.default=function(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}},function(b,c,a){c.__esModule=!0;var d=function(a){return a&&a.__esModule?a:{default:a}}(a(54));c.default=function(){function a(b,c){for(var e=0;e<c.length;e++){var k=c[e];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);(0,d.default)(b,k.key,k)}}return function(b,d,c){return d&&a(b.prototype,d),c&&a(b,c),b}}()},function(b,c,a){b.exports={default:a(139),__esModule:!0}},function(b,c,a){c.__esModule=!0;var d=function(a){return a&&
a.__esModule?a:{default:a}}(a(220));c.default=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return(0,d.default)(a)}},function(b,c,a){c.__esModule=!0;var d=function(a){return a&&a.__esModule?a:{default:a}}(a(20));c.default=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":(0,d.default)(b))&&"function"!=typeof b?a:b}},function(b,c,a){function d(a){return a&&
a.__esModule?a:{default:a}}c.__esModule=!0;var e=d(a(141)),f=d(a(145)),g=d(a(20));c.default=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":(0,g.default)(b)));a.prototype=(0,f.default)(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(e.default?(0,e.default)(a,b):a.__proto__=b)}},function(b,c,a){b=a(17);var d=a.n(b);b=a(2);var e=a.n(b);b=a(3);var f=a.n(b),g=a(0);
b=a(107);var h=a.n(b);a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e()(this,a);this.element=null;this.state={};this.callbacks=d()({},c,b)}return f()(a,[{key:"init",value:function(a){Object(g.f)(a)&&(this.element=a)}},{key:"shouldComponentUpdate",value:function(a,b){return!0}},{key:"componentWillUpdate",value:function(a){}},{key:"updateState",value:function(a){a=d()({},this.state,a);if(this.shouldComponentUpdate(a,
this.state)&&!h()(a,this.state)){var b=this.componentWillUpdate(a);this.state=void 0!==b?d()({},b):d()({},a);this.render();this.updateChildren(a)}}},{key:"render",value:function(){}},{key:"updateChildren",value:function(a){}},{key:"draw",value:function(a){null!==this.element&&(this.element.innerHTML=a)}}]),a}();c.a=a},function(b,c,a){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=d(a(4)),f=d(a(35));c.default=function h(a,b,d){null===a&&(a=Function.prototype);var c=(0,f.default)(a,
b);if(void 0===c)return a=(0,e.default)(a),null===a?void 0:h(a,b,d);if("value"in c)return c.value;b=c.get;return void 0!==b?b.call(d):void 0}},function(b,c,a){b=a(2);var d=a.n(b);b=a(3);var e=a.n(b);b=a(20);var f=a.n(b);b=a(5);var g=a.n(b),h={0:"zero",1:"one"},k=function(a,b){var d=b[2].split("\n").map(function(a){return a.trim()}).filter(function(a){return 0<a.length}).map(function(a){return a.split(/(.+) {(.+)}/).filter(function(a){return 0<a.length})}).map(function(a){return{term:a[0],value:a[1]}});
return{type:a,term:b[0].trim(),selection:d}},q=function(a){var b=a.split(",");if(1===b.length)return{type:"SUBSTITUTION",term:a};switch(b[1].trim().toUpperCase()){case "SELECT":return k("SELECT",b);case "PLURAL":return k("PLURAL",b);default:return""}},p=function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=a.split(""),d=[],c=[],e=0,g=0,f=0;f<=b.length;f++)"{"===b[f]?0===c.length?(c.push("{"),d.push(a.substring(e,f)),e=f+1):c.push("{"):"}"===b[f]?"{"===c[c.length-1]?(c.pop(),
0===c.length&&(d.push(q(a.substring(e,f))),e=f+1)):c.push("}"):g=f;return d.push(a.substring(e,g)),d},n=function(){function a(){d()(this,a);this.cache={}}return e()(a,[{key:"load",value:function(a,b){void 0===this.cache[a]&&(this.cache[a]=p(b))}},{key:"parse",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",c=[];return""!==d?c=p(d):void 0!==this.cache[a]&&(c=[].concat(g()(this.cache[a]))),c.reduce(function(a,
d){if("object"===(void 0===d?"undefined":f()(d)))switch(d.type){case "SUBSTITUTION":a+=b[d.term];break;case "SELECT":a+=function(a,b){var d=b[a.term];a=a.selection.filter(function(a){return a.term===d});return 1===a.length?a[0].value:""}(d,b);break;case "PLURAL":a+=function(a,b){b=b[a.term];for(var d=0;d<a.selection.length;d++){var c=a.selection[d];if("\x3d"===c.term.charAt(0)){if(parseInt(c.term.split("\x3d")[1],10)===b)return a.selection[d].value.replace("#",b)}else if(void 0!==h[String(b)]&&a.selection[d].term===
h[String(b)])return a.selection[d].value.replace("#",b)}a=a.selection.filter(function(a){return"other"===a.term});return 0<a.length?a[0].value.replace("#",b):""}(d,b)}else a+=d;return a},"")}}]),a}(),m=null;a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return d()(this,a),null===m&&(m=this,this.smf=null),null!==b&&(m.language=b),m}return e()(a,[{key:"init",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.smf=new n;void 0!==
D.MultiEmailControl&&void 0!==D.MultiEmailControl.language?m.language=D.MultiEmailControl.language:m.language=a}},{key:"getString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return void 0===this.language[a]?"":(this.smf.load(a,this.language[a]),this.smf.parse(a,b))}}]),a}();c.a=a},function(b,c){b=b.exports={version:"2.6.12"};"number"==typeof __e&&(__e=b)},function(b,c,a){a.d(c,"b",function(){return d});a.d(c,"i",function(){return e});a.d(c,"e",function(){return f});
a.d(c,"h",function(){return g});a.d(c,"f",function(){return h});a.d(c,"j",function(){return k});a.d(c,"g",function(){return q});a.d(c,"d",function(){return p});a.d(c,"a",function(){return n});a.d(c,"c",function(){return m});var d=8,e=9,f=13,g=32,h=37,k=38,q=39,p=40,n=65,m=46},function(b,c,a){a.d(c,"d",function(){return u});a.d(c,"c",function(){return r});a.d(c,"b",function(){return w});a.d(c,"a",function(){return y});a.d(c,"e",function(){return A});b=a(5);var d=a.n(b);b=a(19);var e=a.n(b);b=a(4);
var f=a.n(b);b=a(2);var g=a.n(b);b=a(3);var h=a.n(b);b=a(6);var k=a.n(b);b=a(9);var q=a.n(b);b=a(7);var p=a.n(b);b=a(8);var n=a(0),m=a(10),v=a(12),t=a(1),l=null,u="OVER_QUANTITY_ERR",r="MAX_QUANTITY_ERR",w="INVALID_EMAIL_ERR",y="DUPE_EMAIL_ERR",A="TOO_LONG_EMAIL_ERR",z=document.querySelector.bind(document);a=function(a){function b(){var a,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;g()(this,b);var c,h=k()(this,(b.__proto__||f()(b)).call(this,d));null===l&&(l=h,h.element=d,h.language=
new m.a,h.actionListener=!1,h.actionCallbacks=(c={},e()(c,w,n.i),e()(c,y,n.i),e()(c,u,n.i),c),h.callbacks=[],h.state={errors:[],ignores:[]});return a=l,k()(h,a)}return p()(b,a),h()(b,[{key:"setAria",value:function(a){l.aria=a}},{key:"init",value:function(a){var d=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];q()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.querySelector(".mec .mec-errors"));null!==this.element&&(this.actionListener=Object(n.k)(this.element,"click",
this.handleEventAction.bind(this)),this.keyDownactionListener=Object(n.k)(this.element,"keydown",this.handleEventAction.bind(this)),this.showErrors=d)}},{key:"refireCallbacks",value:function(){this.componentWillUpdate(this.state)}},{key:"componentWillUpdate",value:function(a){var b=a.errors.filter(function(b){return 0>a.ignores.indexOf(b.type)});this.callbacks.map(function(a){return Object(n.e)(a.call(null,{hasErrors:0<b.length,errors:b}))})}},{key:"registerCallback",value:function(a){this.callbacks.push(a)}},
{key:"registerActionCallback",value:function(a,b){this.actionCallbacks[a]=b}},{key:"clearAllErrors",value:function(){this.updateState({errors:[]})}},{key:"clearError",value:function(a){this.updateState({errors:this.state.errors.filter(function(b){return b.type!==a})})}},{key:"handleAction",value:function(a){void 0!==this.actionCallbacks[a]&&(Object(n.e)(this.actionCallbacks[a].apply()),this.aria.assert(this.language.getString("ARIA_"+a+"_CLEAR")))}},{key:"handleEventAction",value:function(a){var b=
a.charCode||a.keyCode||0;(v.e===b||v.h===b||0===b)&&Object(n.b)(a.target,"mec-error-action")&&a.target.getAttribute("data-error-type")&&this.handleAction(a.target.getAttribute("data-error-type"))}},{key:"pushError",value:function(a){var b,c;c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.v;b=this.language.getString(a,c);c=this.language.getString(a.concat("_ACTION"),
c);this.updateState({errors:[].concat(d()(this.state.errors.filter(function(b){return b.type!==a})),[{type:a,value:b,action:c,amount:e,level:g}])})}},{key:"getActiveErrors",value:function(){var a=this;return this.state.errors.filter(function(b){return 0>a.state.ignores.indexOf(b.type)})}},{key:"hasErrors",value:function(){return 0<this.getActiveErrors().length}},{key:"getAriaErrors",value:function(){var a=this;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveErrors()).map(function(b){return a.language.getString("ARIA_"+
b.type,{AMOUNT:b.amount})})}},{key:"addIgnoreOverQuantityError",value:function(){this.updateState({ignores:[].concat(d()(this.state.ignores.filter(function(a){return a!==u})),[u])})}},{key:"clearIgnoreOverQuantityError",value:function(){this.updateState({ignores:this.state.ignores.filter(function(a){return a!==u})})}},{key:"renderMECErrors",value:function(a,b){return'\x3cdiv class\x3d"mec-error" role\x3d"alert"\x3e\x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error"\x3e\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e'+
a+b+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"}},{key:"render",value:function(){var a=this;if(this.showErrors){var b=this.getActiveErrors().reduce(function(b,d){if(d.level===t.w||""===d.value)return b;var c="",e=z('input[name\x3d"mec_weblab_treatment"]');if(null!==e&&(c=e.value),"T1"===c)return b.concat(a.renderMECErrors(d.value,""));e=c="";return""!==d.action&&a.actionListener&&(a.actionCallbacks[d.type]!==n.i&&(e="actionable"),c='\x3ca class\x3d"mec-error-action '+e+'" role\x3d"button" tabindex\x3d"0" data-error-type\x3d"'+
d.type+'"\x3e'+d.action+"\x3c/a\x3e"),b.concat(a.renderMECErrors(d.value,c))},"");this.draw(b)}}}]),b}(b.a);c.f=a},function(b,c,a){b.exports={default:a(148),__esModule:!0}},function(b,c){b=b.exports="undefined"!=typeof D&&D.Math==Math?D:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=b)},function(b,c,a){var d=a(64)("wks"),e=a(45),f=a(15).Symbol,g="function"==typeof f;(b.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=
d},function(b,c,a){c.__esModule=!0;b=function(a){return a&&a.__esModule?a:{default:a}}(a(42));c.default=b.default||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a[g]=c[g])}return a}},function(b,c,a){var d=a(15),e=a(11),f=a(31),g=a(28),h=a(29),k=function(a,b,c){var m,v,t,l=a&k.F,u=a&k.G,r=a&k.S,w=a&k.P,y=a&k.B,A=a&k.W,z=u?e:e[b]||(e[b]={}),x=z.prototype,r=u?d:r?d[b]:(d[b]||{}).prototype;for(m in u&&(c=b),c)(v=!l&&r&&void 0!==
r[m])&&h(z,m)||(t=v?r[m]:c[m],z[m]=u&&"function"!=typeof r[m]?c[m]:y&&v?f(t,d):A&&r[m]==t?function(a){var b=function(b,d,c){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,d)}return new a(b,d,c)}return a.apply(this,arguments)};return b.prototype=a.prototype,b}(t):w&&"function"==typeof t?f(Function.call,t):t,w&&((z.virtual||(z.virtual={}))[m]=t,a&k.R&&x&&!x[m]&&g(x,m,t)))};k.F=1;k.G=2;k.S=4;k.P=8;k.B=16;k.W=32;k.U=64;k.R=128;b.exports=
k},function(b,c,a){c.__esModule=!0;var d=function(a){return a&&a.__esModule?a:{default:a}}(a(54));c.default=function(a,b,c){return b in a?(0,d.default)(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}},function(b,c,a){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;b=d(a(117));var e=d(a(127)),f="function"==typeof e.default&&"symbol"==typeof b.default?function(a){return typeof a}:function(a){return a&&"function"==typeof e.default&&a.constructor===e.default&&a!==
e.default.prototype?"symbol":typeof a};c.default="function"==typeof e.default&&"symbol"===f(b.default)?function(a){return void 0===a?"undefined":f(a)}:function(a){return a&&"function"==typeof e.default&&a.constructor===e.default&&a!==e.default.prototype?"symbol":void 0===a?"undefined":f(a)}},function(b,c,a){var d=a(22),e=a(75),f=a(57),g=Object.defineProperty;c.f=a(23)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(p){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");
return"value"in c&&(a[b]=c.value),a}},function(b,c,a){var d=a(25);b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(b,c,a){b.exports=!a(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(b,c,a){c=a(87);a="object"==typeof self&&self&&self.Object===Object&&self;c=c||a||Function("return this")();b.exports=c},function(b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(b,c,a){a.d(c,
"a",function(){return d});var d=function(){var a=document.querySelector('input[name\x3d"mec_weblab_treatment"]');return null!==a&&"T1"===a.value}},function(b,c,a){b.exports={default:a(224),__esModule:!0}},function(b,c,a){var d=a(21),e=a(36);b.exports=a(23)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,d){return a[b]=d,a}},function(b,c){var a={}.hasOwnProperty;b.exports=function(b,c){return a.call(b,c)}},function(b,c,a){var d=a(79),e=a(60);b.exports=function(a){return d(e(a))}},function(b,c,
a){var d=a(44);b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,g){return a.call(b,c,d,g)}}return function(){return a.apply(b,arguments)}}},function(b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},function(b,c,a){var d=a(60);b.exports=function(a){return Object(d(a))}},function(b,c,a){var d=a(163),e=a(169);b.exports=function(a,b){a=e(a,b);return d(a)?
a:void 0}},function(b,c,a){b.exports={default:a(218),__esModule:!0}},function(b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(b,c){b.exports=!0},function(b,c){b.exports={}},function(b,c,a){var d=a(78),e=a(65);b.exports=Object.keys||function(a){return d(a,e)}},function(b,c){var a={}.toString;b.exports=function(b){return a.call(b).slice(8,-1)}},function(b,c,a){a.d(c,"a",function(){return e});b=a(5);var d=a.n(b),e=function(a){return a.reduce(function(a,
b){var c=b.getValue().toLowerCase();return 0!=c.length&&(void 0===a[c]?a[c]=[b]:a[c]=[].concat(d()(a[c]),[b])),a},{})}},function(b,c,a){b.exports={default:a(136),__esModule:!0}},function(b,c,a){a.d(c,"a",function(){return n});b=a(17);var d=a.n(b);b=a(4);var e=a.n(b);b=a(2);var f=a.n(b);b=a(3);var g=a.n(b);b=a(6);var h=a.n(b);b=a(7);var k=a.n(b);b=a(8);var q=a(10),p=a(0),n=(a(26),25);a=function(a){function b(a,c,d,g){var k=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";f()(this,b);var m=
h()(this,(b.__proto__||e()(b)).call(this,null));return m.getState=a,m.updateParentState=c,m.emailFactory=d,m.updateEmails=g,m.showPlaceholder=!0,m.state={value:""},m.placeHolderData={text:(new q.a).getString(k),width:0},m.create(),Object(p.k)(m.ref,"input",m.updateValue.bind(m)),m}return k()(b,a),g()(b,[{key:"updateValue",value:function(a){this.updateState({value:a.target.value});this.emailParse()}},{key:"create",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.ref=
Object(p.d)(a,d()({},{id:"mec-holder-input",className:"mec-holder-input",spellcheck:"false",autocomplete:"off"},b));this.shadowElement=Object(p.d)("span");this.shadowElement.style.cssText="position: absolute; top: 0; left: 0; visibility: hidden; height:0; z-index: -1"}},{key:"setAriaLabel",value:function(a){this.ref.setAttribute("aria-label",a)}},{key:"setAriaDescribedBy",value:function(a){this.ref.setAttribute("aria-describedby",a.join(" "))}},{key:"setAriaInvalid",value:function(a){this.ref.setAttribute("aria-invalid",
a)}},{key:"removePlaceholderText",value:function(){this.ref.setAttribute("placeholder","");this.showPlaceholder=!1}},{key:"emailParse",value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.updateEmails(this.ref,this.getState(),this.updateParentState,this.emailFactory,this.emailPrehandler,a)&&this.updateState({value:""})}},{key:"forceEmailParse",value:function(){this.emailParse(!0)}},{key:"registerListener",value:function(a,b){Object(p.k)(this.ref,a,b)}},{key:"getRef",
value:function(){return this.ref}},{key:"getShadowRef",value:function(){return this.shadowElement}},{key:"emailPrehandler",value:function(a){return a}}]),b}(b.a);c.b=a},function(b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(b,c){var a=0,d=Math.random();b.exports=function(b){return"Symbol(".concat(void 0===b?"":b,")_",(++a+d).toString(36))}},function(b,c,a){var d=a(21).f,e=a(29),f=a(16)("toStringTag");b.exports=function(a,b,c){a&&!e(a=
c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(b,c){c.f={}.propertyIsEnumerable},function(b,c,a){function d(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}c=a(153);var e=a(154),f=a(155),g=a(156);a=a(157);d.prototype.clear=c;d.prototype.delete=e;d.prototype.get=f;d.prototype.has=g;d.prototype.set=a;b.exports=d},function(b,c,a){var d=a(85);b.exports=function(a,b){for(var c=a.length;c--;)if(d(a[c][0],b))return c;return-1}},function(b,c,a){c=
a(72);var d=a(165),e=a(166),f=c?c.toStringTag:void 0;b.exports=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":f&&f in Object(a)?d(a):e(a)}},function(b,c,a){c=a(34)(Object,"create");b.exports=c},function(b,c,a){var d=a(178);b.exports=function(a,b){a=a.__data__;return d(b)?a["string"==typeof b?"string":"hash"]:a.map}},function(b,c){b.exports=function(a){return null!=a&&"object"==typeof a}},function(b,c,a){b.exports={default:a(115),__esModule:!0}},function(b,c,a){b=a(2);var d=
a.n(b);b=a(3);var e=a.n(b),f=null;a=function(){function a(){return d()(this,a),null===f&&(this.a=null,f=this),f}return e()(a,[{key:"setA",value:function(a){this.a=a}},{key:"getInstance",value:function(){return this.a}}]),a}();c.a=a},function(b,c,a){c=a(25);var d=a(15).document,e=c(d)&&c(d.createElement);b.exports=function(a){return e?d.createElement(a):{}}},function(b,c,a){var d=a(25);b.exports=function(a,b){if(!d(a))return a;var c,h;if(b&&"function"==typeof(c=a.toString)&&!d(h=c.call(a))||"function"==
typeof(c=a.valueOf)&&!d(h=c.call(a))||!b&&"function"==typeof(c=a.toString)&&!d(h=c.call(a)))return h;throw TypeError("Can't convert object to primitive value");}},function(b,c,a){var d=a(119)(!0);a(76)(String,"String",function(a){this._t=String(a);this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(b,c){var a=Math.ceil,d=Math.floor;b.exports=function(b){return isNaN(b=+b)?0:(0<b?d:a)(b)}},function(b,c){b.exports=
function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(b,c,a){var d=a(22),e=a(121),f=a(65),g=a(63)("IE_PROTO"),h=function(){},k=function(){var b;b=a(56)("iframe");var c=f.length;b.style.display="none";a(80).appendChild(b);b.src="javascript:";(b=b.contentWindow.document).open();b.write("\x3cscript\x3edocument.F\x3dObject\x3c/script\x3e");b.close();for(k=b.F;c--;)delete k.prototype[f[c]];return k()};b.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=
d(a),c=new h,h.prototype=null,c[g]=a):c=k(),void 0===b?c:e(c,b)}},function(b,c,a){var d=a(59),e=Math.min;b.exports=function(a){return 0<a?e(d(a),9007199254740991):0}},function(b,c,a){var d=a(64)("keys"),e=a(45);b.exports=function(a){return d[a]||(d[a]=e(a))}},function(b,c,a){c=a(11);var d=a(15),e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});(b.exports=function(a,b){return e[a]||(e[a]=void 0!==b?b:{})})("versions",[]).push({version:c.version,mode:a(37)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},
function(b,c){b.exports="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ")},function(b,c,a){c.f=a(16)},function(b,c,a){var d=a(15),e=a(11),f=a(37),g=a(66),h=a(21).f;b.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},function(b,c){c.f=Object.getOwnPropertySymbols},function(b,c,a){var d=a(47),e=a(36),f=a(30),g=a(57),h=a(29),k=a(75),q=Object.getOwnPropertyDescriptor;c.f=a(23)?q:function(a,
b){if(a=f(a),b=g(b,!0),k)try{return q(a,b)}catch(c){}if(h(a,b))return e(!d.f.call(a,b),a[b])}},function(b,c,a){var d=a(18),e=a(11),f=a(32);b.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],q={};q[a]=b(c);d(d.S+d.F*f(function(){c(1)}),"Object",q)}},function(b,c,a){c=a(34)(a(24),"Map");b.exports=c},function(b,c,a){c=a(24).Symbol;b.exports=c},function(b,c){b.exports=Array.isArray},function(b,c,a){var d=a(44);b.exports.f=function(a){return new function(a){var b,c;this.promise=new a(function(a,
d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a;c=d});this.resolve=d(b);this.reject=d(c)}(a)}},function(b,c,a){b.exports=!a(23)&&!a(32)(function(){return 7!=Object.defineProperty(a(56)("div"),"a",{get:function(){return 7}}).a})},function(b,c,a){var d=a(37),e=a(18),f=a(77),g=a(28),h=a(38),k=a(120),q=a(46),p=a(81),n=a(16)("iterator"),m=!([].keys&&"next"in[].keys()),v=function(){return this};b.exports=function(a,b,c,r,w,y,A){k(c,b,r);var z,x,M;r=function(a){return!m&&a in
E?E[a]:function(){return new c(this,a)}};var O=b+" Iterator",F="values"==w,G=!1,E=a.prototype,J=E[n]||E["@@iterator"]||w&&E[w],H=J||r(w),K=w?F?r("entries"):H:void 0,C="Array"==b&&E.entries||J;if(C&&(M=p(C.call(new a)))!==Object.prototype&&M.next&&(q(M,O,!0),d||"function"==typeof M[n]||g(M,n,v)),F&&J&&"values"!==J.name&&(G=!0,H=function(){return J.call(this)}),d&&!A||!m&&!G&&E[n]||g(E,n,H),h[b]=H,h[O]=v,w)if(z={values:F?H:r("values"),keys:y?H:r("keys"),entries:K},A)for(x in z)x in E||f(E,x,z[x]);else e(e.P+
e.F*(m||G),b,z);return z}},function(b,c,a){b.exports=a(28)},function(b,c,a){var d=a(29),e=a(30),f=a(122)(!1),g=a(63)("IE_PROTO");b.exports=function(a,b){var c;a=e(a);var p=0,n=[];for(c in a)c!=g&&d(a,c)&&n.push(c);for(;b.length>p;)d(a,c=b[p++])&&(~f(n,c)||n.push(c));return n}},function(b,c,a){var d=a(40);b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(b,c,a){c=a(15).document;b.exports=c&&c.documentElement},function(b,c,a){var d=
a(29),e=a(33),f=a(63)("IE_PROTO"),g=Object.prototype;b.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(b,c,a){a(124);b=a(15);c=a(28);var d=a(38);a=a(16)("toStringTag");for(var e="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),
f=0;f<e.length;f++){var g=e[f],h=b[g];(h=h&&h.prototype)&&!h[a]&&c(h,a,g);d[g]=d.Array}},function(b,c,a){var d=a(78),e=a(65).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},function(b,c){},function(b,c){b.exports=function(a,b){return a===b||a!=a&&b!=b}},function(b,c,a){var d=a(50),e=a(88);b.exports=function(a){if(!e(a))return!1;a=d(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}},function(b,
c,a){c=a(164);b.exports="object"==typeof c&&c&&c.Object===Object&&c},function(b,c){b.exports=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}},function(b,c){var a=Function.prototype.toString;b.exports=function(b){if(null!=b){try{return a.call(b)}catch(c){}return b+""}return""}},function(b,c,a){function d(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}c=a(170);var e=a(177),f=a(179),g=a(180);a=a(181);d.prototype.clear=c;d.prototype.delete=
e;d.prototype.get=f;d.prototype.has=g;d.prototype.set=a;b.exports=d},function(b,c,a){var d=a(182),e=a(185),f=a(186);b.exports=function(a,b,c,q,p,n){var m=c&1,v=a.length,t=b.length;if(v!=t&&!(m&&t>v))return!1;var t=n.get(a),l=n.get(b);if(t&&l)return t==b&&l==a;var t=-1,l=!0,u=c&2?new d:void 0;n.set(a,b);for(n.set(b,a);++t<v;){var r=a[t],w=b[t];if(q)var y=m?q(w,r,t,b,a,n):q(r,w,t,a,b,n);if(void 0!==y){if(y)continue;l=!1;break}if(u){if(!e(b,function(a,b){if(!f(u,b)&&(r===a||p(r,a,c,q,n)))return u.push(b)})){l=
!1;break}}else if(r!==w&&!p(r,w,c,q,n)){l=!1;break}}return n.delete(a),n.delete(b),l}},function(b,c,a){b=a(93)(b);var d=a(24);a=a(203);var e=(c="object"==typeof c&&c&&!c.nodeType&&c)&&"object"==typeof b&&b&&!b.nodeType&&b,d=e&&e.exports===c?d.Buffer:void 0;b.exports=(d?d.isBuffer:void 0)||a},function(b,c){b.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,
"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(b,c,a){c=a(205);var d=a(206);c=(a=(a=a(207))&&a.isTypedArray)?d(a):c;b.exports=c},function(b,c){b.exports=function(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}},function(b,c,a){var d=a(22);b.exports=function(a,b,c,h){try{return h?b(d(c)[0],c[1]):b(c)}catch(k){throw b=a.return,void 0!==b&&d(b.call(a)),k;}}},function(b,c,a){var d=a(38),e=a(16)("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==
a&&(d.Array===a||f[e]===a)}},function(b,c,a){var d=a(99),e=a(16)("iterator"),f=a(38);b.exports=a(11).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},function(b,c,a){var d=a(40),e=a(16)("toStringTag"),f="Arguments"==d(function(){return arguments}());b.exports=function(a){var b,c;if(void 0===a)b="Undefined";else{var q;if(null===a)q="Null";else{a:{var p=a=Object(a);try{q=p[e];break a}catch(n){}q=void 0}q="string"==typeof(b=q)?b:f?d(a):"Object"==(c=d(a))&&"function"==
typeof a.callee?"Arguments":c}b=q}return b}},function(b,c,a){var d=a(16)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0};Array.from(f,function(){throw 2;})}catch(g){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{b=[7];var f=b[d]();f.next=function(){return{done:c=!0}};b[d]=function(){return f};a(b)}catch(p){}return c}},function(b,c,a){var d=a(22),e=a(44),f=a(16)("species");b.exports=function(a,b){var c;a=d(a).constructor;return void 0===a||void 0==(c=d(a)[f])?b:e(c)}},function(b,
c,a){var d,e,f,g=a(31),h=a(228),k=a(80),q=a(56),p=a(15),n=p.process;c=p.setImmediate;var m=p.clearImmediate,v=p.MessageChannel,t=p.Dispatch,l=0,u={},r=function(){var a=+this;if(u.hasOwnProperty(a)){var b=u[a];delete u[a];b()}},w=function(a){r.call(a.data)};c&&m||(c=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return u[++l]=function(){h("function"==typeof a?a:Function(a),b)},d(l),l},m=function(a){delete u[a]},"process"==a(40)(n)?d=function(a){n.nextTick(g(r,a,1))}:t&&t.now?
d=function(a){t.now(g(r,a,1))}:v?(f=(e=new v).port2,e.port1.onmessage=w,d=g(f.postMessage,f,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(d=function(a){p.postMessage(a+"","*")},p.addEventListener("message",w,!1)):d="onreadystatechange"in q("script")?function(a){k.appendChild(q("script")).onreadystatechange=function(){k.removeChild(this);r.call(a)}}:function(a){setTimeout(g(r,a,1),0)});b.exports={set:c,clear:m}},function(b,c){b.exports=function(a){try{return{e:!1,v:a()}}catch(b){return{e:!0,
v:b}}}},function(b,c,a){var d=a(22),e=a(25),f=a(74);b.exports=function(a,b){if(d(a),e(b)&&b.constructor===a)return b;a=f.f(a);return(0,a.resolve)(b),a.promise}},function(b,c){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof D.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var d=new Uint8Array(16);b.exports=function(){return a(d),d}}else{var e=Array(16);b.exports=function(){for(var a,
b=0;16>b;b++)0==(3&b)&&(a=4294967296*Math.random()),e[b]=a>>>((3&b)<<3)&255;return e}}},function(b,c){var a=[];for(c=0;256>c;++c)a[c]=(c+256).toString(16).substr(1);b.exports=function(b,c){c=c||0;return[a[b[c++]],a[b[c++]],a[b[c++]],a[b[c++]],"-",a[b[c++]],a[b[c++]],"-",a[b[c++]],a[b[c++]],"-",a[b[c++]],a[b[c++]],"-",a[b[c++]],a[b[c++]],a[b[c++]],a[b[c++]],a[b[c++]],a[b[c++]]].join("")}},function(b,c,a){var d=a(150);b.exports=function(a,b){return d(a,b)}},function(b,c,a){b=a(14);var d=a.n(b);b=a(4);
var e=a.n(b);b=a(2);var f=a.n(b);b=a(3);var g=a.n(b);b=a(6);var h=a.n(b);b=a(7);var k=a.n(b);b=a(5);var q=a.n(b);b=a(8);var p=a(0),n=a(1),m=a(10),v=a(12),t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,l=function(a,b,c,d,e){if(5<arguments.length&&void 0!==arguments[5]&&arguments[5]){for(var f=-1,g=0;g<b.parsedEmails.length;g++)null!==b.parsedEmails[g].textBox&&b.parsedEmails[g].textBox.ref===a&&(f=g,g=b.parsedEmails.length);-1!==f&&(g=e(Object(p.l)(a.value)),c({parsedEmails:[].concat(q()(b.parsedEmails.slice(0,
f)),q()(g.map(function(a){return d.create(a)})),q()(b.parsedEmails.slice(f+1)))}))}return!1};a=function(a){function b(a,c,d,g,k,q,p){f()(this,b);var n=h()(this,(b.__proto__||e()(b)).call(this));return n.removeFn=c,n.state={value:a,id:d,uuid:g,errors:{}},n.ref=null,n.editRef=null,n.textBox=null,n.textElement=null,n.textBoxFactory=k,n.clickSelector=q,n.loadable=p,n.language=new m.a,n.changeToEditMode=n.changeToEditMode.bind(n),n}return k()(b,a),g()(b,[{key:"getAriaValues",value:function(){return{email:this.state.value,
errors:d()(this.state.errors)}}},{key:"getValue",value:function(){return this.state.value}},{key:"getUUID",value:function(){return this.state.uuid}},{key:"isErrored",value:function(){return Object(p.b)(this.ref,"error")}},{key:"addClass",value:function(a){null!==this.ref&&Object(p.a)(this.ref,a)}},{key:"removeClass",value:function(a){null!==this.ref&&Object(p.c)(this.ref,a)}},{key:"isValid",value:function(){return!!t.test(this.state.value)||(this.markAsError(n.i),!1)}},{key:"isOverLength",value:function(){return this.state.value.length>
n.z&&(this.markAsError(n.j),!0)}},{key:"switchBindings",value:function(a,b){Object(p.n)(this.textElement,b,this.changeToEditMode);Object(p.k)(this.textElement,a,this.changeToEditMode)}},{key:"updateValue",value:function(a){this.updateState({value:a.target.value})}},{key:"changeToEditMode",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p.i;b.metaKey||b.ctrlKey||(this.clearError(),b=Object(p.d)("span",
{className:"mec-tab editable"}),this.textBox=this.textBoxFactory.create(l),b.appendChild(this.textBox.getRef()),b.appendChild(this.textBox.getShadowRef()),this.ref.parentNode.replaceChild(b,this.ref),this.textBox.updateState({value:this.state.value}),this.textBox.setAriaLabel(this.language.getString(n.c,{EMAIL:this.state.value})),this.textBox.getRef().focus(),this.editRef=b,Object(p.k)(this.textBox.getRef(),"keydown",function(b){(b.charCode||b.keyCode||0)===v.e&&(b.preventDefault(),b.stopPropagation(),
a.textBox.forceEmailParse(),c())}),Object(p.k)(this.textBox.getRef(),"input",function(b){b.target.value.length&&b.target.value.charCodeAt(b.target.value.length-1)===v.h&&(b.preventDefault(),b.stopPropagation(),a.textBox.forceEmailParse())}),Object(p.k)(this.textBox.getRef(),"blur",function(b){a.textBox.forceEmailParse();c()}))}},{key:"render",value:function(){null!==this.textElement&&(this.textElement.textContent=this.state.value)}},{key:"registerEvents",value:function(a){}}]),b}(b.a);c.a=a},function(b,
c,a){b.exports={default:a(235),__esModule:!0}},function(b,c,a){c=a(236);a=a(237);a.v1=c;a.v4=a;b.exports=a},function(b,c,a){b=a(5);var d=a.n(b);b=a(2);var e=a.n(b);b=a(3);var f=a.n(b),g=a(10),h=a(0),k=a(1);a=function(){function a(b,c,d){e()(this,a);this.textboxFactory=b;this.language=new g.a;this.errorSection=c;this.aria=d;this.el=null}return f()(a,[{key:"getRef",value:function(){return this.el.getRef()}},{key:"forceEmailParse",value:function(){null!==this.el&&this.el.forceEmailParse()}},{key:"getShadowRef",
value:function(){return this.el.getShadowRef()}},{key:"displayPlaceholderText",value:function(){this.el.displayPlaceholderText()}},{key:"hide",value:function(){Object(h.a)(this.el.getRef(),"hidden")}},{key:"show",value:function(){Object(h.c)(this.el.getRef(),"hidden")}},{key:"updateErrorAriaElements",value:function(){var a=this.errorSection.getAriaErrors(this.errorSection.getActiveErrors()),b=document.querySelector("#"+k.A),c=0<a.length;this.el.setAriaInvalid(c);var e="";c&&(e=[this.language.getString(k.k)].concat(d()(a)).join(" "));
null==b&&((b=Object(h.d)("div",{id:k.A,class:[k.p,k.q].join(" ")})).style.height="0px",document.querySelector("."+k.E).appendChild(b));b.innerHTML=e}}]),a}();c.a=a},function(b,c,a){b=a(20);var d=a.n(b);b=a(17);var e=a.n(b);b=a(4);var f=a.n(b);b=a(2);var g=a.n(b);b=a(3);var h=a.n(b);b=a(6);var k=a.n(b);b=a(7);var q=a.n(b);b=a(8);var p=a(9),n=a.n(p),m=a(10),v=function(a){function b(){g()(this,b);var a=k()(this,(b.__proto__||f()(b)).call(this));return a.language=new m.a,a.state={emailCount:0,maxEmailCount:0},
a}return q()(b,a),h()(b,[{key:"init",value:function(a){n()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.querySelector(".mec .mec-selected"))}},{key:"render",value:function(){var a=this.state,b=a.emailCount,a=a.maxEmailCount;0<=b&&0<a?this.draw(this.language.getString("SELECTED_EMAILS",{AMOUNT:b,MAX:a})):this.draw("")}}]),b}(b.a),t=function(a){function b(){g()(this,b);var a=k()(this,(b.__proto__||f()(b)).call(this));return a.language=new m.a,a.state={emailCount:0,maxEmailCount:0},
a}return q()(b,a),h()(b,[{key:"init",value:function(a){n()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.querySelector(".mec .mec-information"))}},{key:"render",value:function(){var a=this.state,b=a.emailCount,a=a.maxEmailCount;0<=b&&0<a&&a>=b?this.draw(this.language.getString("SELECTED_EMAILS_INFO",{AMOUNT:a-b})):this.draw("")}}]),b}(b.a),l=a(1),u=function(a){function b(){g()(this,b);var a=k()(this,(b.__proto__||f()(b)).call(this));return a.language=new m.a,a.state={},a}return q()(b,
a),h()(b,[{key:"init",value:function(a){n()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.getElementById(l.C));this.render()}},{key:"render",value:function(){this.draw(this.language.getString("SELECTED_EMAILS_INFO"))}}]),b}(b.a),r=a(26),w=function(a){function b(){g()(this,b);var a=k()(this,(b.__proto__||f()(b)).call(this));return a.language=new m.a,a.state={},a}return q()(b,a),h()(b,[{key:"init",value:function(a){n()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,
a.querySelector(".mec .mec-label label"));this.render()}},{key:"render",value:function(){Object(r.a)()?this.draw(this.language.getString("TO_FIELD")+" "+this.language.getString("SELECTED_EMAILS_INFO")):this.draw(this.language.getString("TO_FIELD"))}}]),b}(b.a),y=a(0),A=function(a){return Object(y.d)("span",{className:"mec-aria-reader","aria-live":a,"aria-atomic":"true"})},z=function(a){function b(a){g()(this,b);var c=k()(this,(b.__proto__||f()(b)).call(this));return c.assertive=null,c.explainer=null,
c.tabStub=null,c.errorSection=a,c.uiHandler=null,c.state={emailCount:0,maxEmailCount:0},c}return q()(b,a),h()(b,[{key:"setUIHandler",value:function(a){this.uiHandler=a;this.uiHandler.setAria(this)}},{key:"init",value:function(){this.assertive=A("assertive");this.explainer=A("polite");this.initUI()}},{key:"initUI",value:function(){document.body.childNodes.length&&(document.body.insertBefore(this.assertive,document.body.childNodes[0]),document.body.insertBefore(this.explainer,document.body.childNodes[0]))}},
{key:"updateEmailCount",value:function(a){this.updateState(a)}},{key:"assert",value:function(a){this.assertive.textContent=a}},{key:"explain",value:function(a){this.explainer.textContent=a}}]),b}(b.a),x=a(13),p=a(55),M=(a(41),new p.a),D=function(a,b,c,d,e){M.getInstance().$.ajax({type:"POST",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:b,success:function(a){c({errors:[]})},error:e,dataType:"json"})},F=function(){function a(b){g()(this,a);var c=Object(y.g)(b,"options.saveParameters.timeout")?
d()(b.saveParameters.timeout):l.L;this.options=e()({updateUrl:"",saveUrl:"",getUrl:"",savePayload:{},timeout:c},b)}return h()(a,[{key:"update",value:function(a,b,c,d){D(this.options.updateUrl,a,c,0,function(c,e,f){d({status:e,err:f,dataString:a,attempt:b})})}},{key:"submit",value:function(a,b,c){D(this.options.saveUrl,a,b,0,function(a,b,d){Object(y.h)(d)?0===d.errors.length?c({errors:[{type:l.w,value:d}]}):c({errors:d.errors}):c({errors:[{type:l.w,value:"An unknown error has occurred"}]})})}},{key:"get",
value:function(a,b,c,d,e){var f=-1===this.options.getUrl.indexOf("?")?"?":"\x26";b=this.options.getUrl+(f+"limit\x3d")+b+"\x26page\x3d"+a+Object(y.j)(this.options.savePayload);M.getInstance().$.ajax({type:"GET",url:b,success:function(a){d(a)},error:function(b,d,f){e({status:d,err:f,page:a,attempt:c})},dataType:"json",timeout:this.options.timeout})}},{key:"updateOptions",value:function(a){this.options=e()({},this.options,a)}}]),a}(),p=a(19),G=a.n(p),E=function(a){switch(a){case l.u:case l.n:return function(a){return function(b){return G()({},
a,1)}}(a)}switch(a){case l.r:case l.y:return function(a){return function(b){return G()({},a,b)}}(a)}return function(){return{}}},J=function(a){function b(){var a;g()(this,b);var c=k()(this,(b.__proto__||f()(b)).call(this));return c.callback=null,c.state=(a={},G()(a,l.r,0),G()(a,l.u,0),G()(a,l.y,0),G()(a,l.n,0),a),c}return q()(b,a),h()(b,[{key:"setCallback",value:function(a){this.callback=a}},{key:"push",value:function(a,b){var c=E(a)(b);this.updateState(c);a!==l.n&&a!==l.u||this.state.emailParsed||
this.updateState(E(l.u)(1));a===l.r&&this.state[l.y]<b&&this.updateState(E(l.y)(b));null!==this.callback&&Object(y.e)(this.callback.call(null,c))}},{key:"getStats",value:function(){return this.state}}]),b}(b.a),p=a(35),H=a.n(p),p=a(54),K=a.n(p),C=function(){K.a&&H.a&&H()(Element.prototype,"textContent")&&!H()(Element.prototype,"textContent").get&&function(){var a=H()(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return a.get.call(this)},set:function(b){return a.set.call(this,
b)}})}()},N=function(){Array.prototype.forEach||(Array.prototype.forEach=function(a){var b,c;if(null==this)throw new TypeError("this is null or not defined");var d=Object(this),e=d.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(b=arguments[1]);for(c=0;c<e;){var f;c in d&&(f=d[c],a.call(b,f,c,d));c++}});!NodeList.prototype.forEach&&Array.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},B=null,I=document.querySelector.bind(document),
Q=function(a){function b(a){g()(this,b);var c=k()(this,(b.__proto__||f()(b)).call(this));return c.errorSection=new x.f,c.metrics=new J,c.aria=new z(c.errorSection),c.errorSection.setAria(c.aria),c.emailArea=new a({updateEmailCount:c.updateEmailCount.bind(c)},c.aria),c.selectedField=new v,c.selectedFieldInfo=new t,c.toField=new w,c.instructionField=new u,c.options={overQuantityCallback:y.i,errorStateCallback:y.i,metricsCallback:y.i,updateUrl:"",saveUrl:"",getUrl:"",saveParameters:{},savePayload:{},
maxQuantity:999,limit:0,showErrors:!0},c.state={emailCount:0,maxEmailCount:0},C(),N(),c}return q()(b,a),h()(b,[{key:"init",value:function(a){var b=this,c=new m.a;c.init();this.errorSection.init(a,this.options.showErrors);this.errorSection.registerActionCallback(x.d,function(){return b.options.overQuantityCallback.apply(null,[b.state.emailCount])});this.errorSection.registerCallback(this.options.errorStateCallback);this.metrics.setCallback(this.options.metricsCallback);var d=new F(this.options);this.emailArea.init(a,
this.options,c,d,this.metrics);this.selectedField.init(a);c=I('input[name\x3d"mec_weblab_treatment"]');null!==c&&c.value===l.K?this.instructionField.init(a):this.selectedFieldInfo.init(a);this.toField.init(a)}},{key:"rebuild",value:function(a){this.selectedField.init(a);this.selectedField.render();var b=I('input[name\x3d"mec_weblab_treatment"]');null!==b&&b.value===l.K?this.instructionField.init(a):(this.selectedFieldInfo.init(a),this.selectedFieldInfo.render());this.errorSection.init(a,this.options.showErrors);
this.errorSection.refireCallbacks();this.errorSection.render();this.emailArea.build(a);this.emailArea.render()}},{key:"updateChildren",value:function(a){var b=this.errorSection,c=this.options;b.clearError(x.d);b.clearError(x.c);a.emailCount>c.maxQuantity?b.pushError(x.c,{AMOUNT:a.emailCount-c.maxQuantity,QUANTITY:c.maxQuantity},a.emailCount-c.maxQuantity):a.emailCount>a.maxEmailCount&&b.pushError(x.d,{AMOUNT:a.emailCount-a.maxEmailCount,QUANTITY:a.emailCount},a.emailCount-a.maxEmailCount);!0;this.selectedField.updateState({emailCount:a.emailCount,
maxEmailCount:a.maxEmailCount});this.aria.updateEmailCount({emailCount:a.emailCount,maxEmailCount:a.maxEmailCount});this.selectedFieldInfo.updateState({emailCount:a.emailCount,maxEmailCount:a.maxEmailCount});this.emailArea.emailCountUpdated();this.metrics.push(l.r,a.emailCount)}},{key:"updateEmailCount",value:function(a){this.updateState({emailCount:a})}},{key:"setMaxEmailCount",value:function(a){this.updateState({maxEmailCount:a})}},{key:"isValid",value:function(){return this.emailArea.isValid()}},
{key:"submit",value:function(){return this.emailArea.submit()}},{key:"getStats",value:function(){return this.metrics.getStats()}},{key:"handleErrorAction",value:function(a){this.errorSection.handleAction(a)}},{key:"addEmails",value:function(a){this.emailArea.addEmails(a)}}]),b}(b.a);a=function(){function a(){g()(this,a)}return h()(a,null,[{key:"register",value:function(a){return B=new Q(a),function(){return{init:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;B.options=
e()({},B.options,a);B.init(b)},rebuild:function(){B.rebuild(0<arguments.length&&void 0!==arguments[0]?arguments[0]:document)},getInstance:function(){return B},setMaxEmailCount:function(a){B.setMaxEmailCount(parseInt(a,10))},isValid:function(){return B.isValid()},submit:function(){return B.submit()},getStats:function(){return B.getStats()},handleErrorAction:function(a){B.handleErrorAction(a)},addIgnoreOverQuantityError:function(){B.errorSection.addIgnoreOverQuantityError()},clearIgnoreOverQuantityError:function(){B.errorSection.clearIgnoreOverQuantityError()},
getEmails:function(){return B.emailArea.getParsedEmails().map(function(a){return a.state.value})},startNewSession:function(a){if("object"!==(void 0===a?"undefined":d()(a)))throw"savePayload must be an included object";B.emailArea.emailTransporter.updateOptions({savePayload:a});B.emailArea.removeAllEmails()},addEmails:function(a){B.addEmails(a)},removeAllEmails:function(){B.emailArea.removeAllEmails()}}}}}]),a}();c.a=a},function(b,c,a){b=a(27);var d=a.n(b);b=a(42);var e=a.n(b);b=a(4);var f=a.n(b);
b=a(2);var g=a.n(b);b=a(3);var h=a.n(b);b=a(6);var k=a.n(b);b=a(9);var q=a.n(b);b=a(7);var p=a.n(b);b=a(5);var n=a.n(b);b=a(14);var m=a.n(b);b=a(8);var v=a(13),t=function(){function a(){g()(this,a);this.locked=!1}return h()(a,[{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return this.locked}}]),a}(),l=a(0),u=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.i,d=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:l.i,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:l.i;g()(this,a);this.getState=c;this.updateState=d;this.emailFactory=e;this.classObj=b}return h()(a,[{key:"create",value:function(a){return new this.classObj(this.getState,this.updateState,this.emailFactory,a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")}}]),a}(),r=a(1),w=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:l.i,c=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:l.i;g()(this,a);this.arr=[];this.failureCallback=b;this.doneCallback=c}return h()(a,[{key:"add",value:function(a){var b=this;return a.state||(a.state="pending",a.then(function(c){a.state="resolved";b.finalize()},function(c){a.state="rejected";b.finalize()})),this.arr.push(a),a}},{key:"finalize",value:function(){!this.hasPending()&&this.hasRejected()&&this.failureCallback.apply(null);this.hasPending()||(this.doneCallback.apply(null),this.doneCallback=l.i)}},{key:"hasPending",
value:function(){return 0<this.arr.filter(function(a){return"pending"===a.state}).length}},{key:"hasRejected",value:function(){return 0<this.arr.filter(function(a){return"rejected"===a.state}).length}}]),a}(),y=new v.f,A=document.querySelector.bind(document),z=function(){y.pushError(r.w,{},0,r.w)},x=function(){function a(b){g()(this,a);this.emailCount=this.emailLimit=null;this.loadable=!1;this.promiseFollower=new w(z);this.emailFactory=b;this.handleGetErr=this.handleGetErr.bind(this)}return h()(a,
[{key:"init",value:function(a,b){this.emails=document.querySelectorAll(".mec-tab");var c=A('input[name\x3d"mec_email_limit"]');null!==c&&(this.emailLimit=A('input[name\x3d"mec_email_limit"]').value,c.parentNode.removeChild(c));c=A('input[name\x3d"mec_email_count"]');null!==c&&(this.emailCount=A('input[name\x3d"mec_email_count"]').value,c.parentNode.removeChild(c));this.loadable=null!==this.emails&&null!==this.emailLimit&&null!==this.emailCount;this.updateState=a;this.getState=b;this.emailTransporter=
null}},{key:"hasPending",value:function(){return this.promiseFollower.hasPending()}},{key:"load",value:function(){var a=this;if(this.loadable){var b=[];this.emails.forEach(function(c){var d=c.textContent,e=c.getAttribute("data-uuid");c=Object(l.b)(c,"loadable");b.push(a.emailFactory.create(d,e,c))});0<b.length&&(this.updateState({parsedEmails:b,loadedList:!0}),b>this.emailLimit&&this.getEmailsFromServer())}}},{key:"handleGetErr",value:function(a){if(!(a.attempt<r.m))throw a;this.promiseFollower.add(this.getEmailFromServer(a.page,
++a.attempt))}},{key:"getEmailsFromServer",value:function(){for(var a=Math.ceil((this.emailCount-this.emailLimit)/this.emailLimit),b=1;b<=a;b++){var c=this.getEmailFromServer(b,1);this.promiseFollower.add(c)}}},{key:"getEmailFromServer",value:function(a,b){var c=this;return(new d.a(function(d,e){c.emailTransporter.get(a,c.emailLimit,b,d,e)})).then(function(a){void 0!==a.emails&&function(a,b,c,d){b=b().parsedEmails;for(var e=-1,f=0;f<b.length;f++)b[f].loadable&&(e=f,f=b.length);c({parsedEmails:-1===
e?[].concat(n()(b),n()(a.map(function(a){return d.create(a.value,a.uuid)}))):[].concat(n()(b.slice(0,e)),n()(a.map(function(a){return d.create(a.value,a.uuid)})),n()(b.slice(e+a.length,b.length))),loadedList:!0})}(a.emails,c.getState,c.updateState,c.emailFactory)}).catch(this.handleGetErr)}}]),a}(),M=a(109),D=a.n(M),F=a(41),G=function(a){var b={},c=Object(F.a)(a);return m()(c).forEach(function(a){c[a][0].isValid()&&!c[a][0].isOverLength()&&(b[c[a][0].getUUID()]=c[a][0].getValue())}),b},E=function(a,
b){return function(c){var d=[],e=[],f=0;return c.forEach(function(b){e.push(""+r.M+f+"\x3d"+b);e.push(""+r.t+f+"\x3d"+encodeURIComponent(a[b]));d.push(f);f++}),{type:b,indexes:d,fields:e}}},J=function(a){return function(b){var c={add:"add"===b.type?b.indexes:[],remove:"remove"===b.type?b.indexes:[]};return b.fields.join("\x26")+"\x26"+r.D+"\x3d"+D()(c)+Object(l.j)(a)}},H=function(a,b){return a.reduce(function(a,c,d){d=Math.floor(d/b);return a[d]||(a[d]=[]),a[d].push(c),a},[])},K=function(){function a(b,
c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r.a;g()(this,a);this.transport=b;this.uiLocker=c;this.updatePFollower=new w;this.opt={chunkSize:Object(l.g)(d,"appOptions.saveParameters.chunkSize")?d.saveParameters.chunkSize:r.o,attempts:Object(l.g)(d,"appOptions.saveParameters.attempts")?d.saveParameters.attempts:r.m};this.limitingQuantity=e;this.overflowed=!1;this.ids=[]}return h()(a,[{key:"handleUpdateErr",value:function(a){if(!(a.attempt<
this.opt.attempts))throw a;this.updatePFollower.add(this.update(a.dataString,++a.attempt))}},{key:"update",value:function(a,b){var c=this;return(new d.a(function(d,e){c.transport.update(a,b,d,e)})).catch(this.handleUpdateErr.bind(this))}},{key:"updated",value:function(){var a=this,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=G(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]),e=G(b);return m()(c).forEach(function(a){void 0!==e[a]&&(delete c[a],delete e[a])}),b.length>this.limitingQuantity?
(this.overflowed=!0,e={},c=m()(c).reduce(function(b,d){return-1===a.ids.indexOf(d)&&delete c[d],b},c)):this.overflowed&&(this.overflowed=!1,e=this.ids.reduce(function(a,b){return delete a[b],a},G(b))),(new d.a(function(b,d){var f=a.transport.options.savePayload;d=m()(e);var g=H(d,a.opt.chunkSize).map(E(e,"add")).map(J(f)),f=H(m()(c),a.opt.chunkSize).map(E(c,"remove")).map(J(f));a.ids=[].concat(n()(a.ids),n()(d));b([].concat(n()(g),n()(f)))})).then(function(b){return b.map(function(b){b=a.update(b,
1);a.updatePFollower.add(b)})})}},{key:"submit",value:function(a,b,c,e){var f=this;if(a.hasPending())a.promiseFollower.doneCallback=function(){return f.submit(a,b,c,e)};else if(this.updatePFollower.hasPending())this.updatePFollower.doneCallback=function(){return f.submit(a,b,c,e)};else{var g=this.transport.options.savePayload;this.uiLocker.lock();(new d.a(function(a,c){return function(a,b,c,d,e){b=b().map(function(a){return a.isValid()?a.getUUID():""}).filter(function(a){return 0<a.length}).reduce(function(a,
b){return a.result=a.result+""+(0!==a.acc?"\x26":"")+r.M+a.acc+"\x3d"+b,a.acc+=1,a},{acc:0,result:""});c=Object(l.j)(c);a.submit(b.result+c,d,e)}(f.transport,b,g,a,c)})).then(function(a,b){c.apply(null,a);f.uiLocker.unlock()}).catch(function(d){if(void 0!==d.errors){var g=d.errors.filter(function(a){return a.type===r.H});0<g.length?(d=b().reduce(function(a,b){return 0<g.filter(function(a){return a.value===b.getUUID()}).length&&a.push(b),a},[]),f.updated([],d).then(function(d){f.submit(a,b,c,e)})):
(f.uiLocker.unlock(),e.apply(null,d))}else f.uiLocker.unlock(),e.apply(null,d)})}}}]),a}(),C=new v.f,N=document.querySelector.bind(document),B=function(a){var b=[],c=[],d=[],e=Object(F.a)(a);return m()(e).forEach(function(a){for(var f=0;f<e[a].length;f++){var g=!1;0!==f&&(e[a][f].markAsError(r.f),c.push(e[a][f]),g=!0);e[a][f].isValid()||(b.push(e[a][f]),g=!0);e[a][f].isOverLength()&&(d.push(e[a][f]),g=!0);g||e[a][f].clearError()}}),I(C,b,v.b),I(C,c,v.a),I(C,d,v.e),b.length+c.length+d.length},I=function(a,
b,c){0<b.length?a.pushError(c,{AMOUNT:b.length,FIRST_INVALID_EMAIL:b[0].state.value},b.length):a.clearError(c)},Q=function(a,b,c){return function(){var d=b().parsedEmails;a({parsedEmails:d.filter(c)})}},W={updateEmailCount:l.i};a=function(a){function b(a,c){g()(this,b);a=k()(this,(b.__proto__||f()(b)).call(this,a,W));return a.aria=c,a.emailTransporter=null,a.language=null,a.metrics=null,a.persistenceHandler=null,a.uiLocker=new t,a.appOptions={limit:0},a.state={parsedEmails:[],loadedList:!1},a}return p()(b,
a),h()(b,[{key:"init",value:function(a,c,d,e,g){var h=this;q()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.querySelector(".mec .mec-area"));null!=this.element&&(this.language=d,this.appOptions=c,this.emailTransporter=e,this.aria.init(),this.metrics=g,this.textboxHandler.init(function(a){return function(b,c,d,e,f){var g=5<arguments.length&&void 0!==arguments[5]&&arguments[5],h=[],h=l.m(b.value);if(1<(h=f(h=1<h.length?h.filter(function(a){return 1<=a.length&&-1!==a.indexOf("@")}):
l.l(b.value))).length)return l.e(a.push(r.n,h.length)),d({parsedEmails:[].concat(n()(c.parsedEmails),n()(h.map(function(a){return e.create(a)})))}),!0;if(0<b.value.length&&1===h.length){var k=b.value.charAt(b.value.length-1);if(g||" "===k||","===k||";"===k)return l.e(a.push(r.u,1)),d({parsedEmails:[].concat(n()(c.parsedEmails),n()(h.map(function(a){return e.create(a)})))}),!0}return!1}}(this.metrics)),this.emailLoader.init(this.updateState.bind(this),function(){return h.state}),this.emailLoader.emailTransporter=
this.emailTransporter,this.persistenceHandler=new K(this.emailTransporter,this.uiLocker,c))}},{key:"build",value:function(a){q()(b.prototype.__proto__||f()(b.prototype),"init",this).call(this,a.querySelector(".mec .mec-area"));this.tabArea=a.querySelector(".mec-tab-box");this.initUI(a);this.textboxHandler.emailStateUpdated(this.state)}},{key:"createHandlersNFactories",value:function(a,b,c){var d=this;this.textboxFactory=new u(c,function(){return d.state},this.updateState.bind(this),a);a.setTexboxFactory(this.textboxFactory);
this.emailFactory=a;this.emailLoader=new x(a);this.textboxHandler=new b(this.textboxFactory,C,this.aria)}},{key:"initUI",value:function(a){}},{key:"initErrCallbacks",value:function(){var a=this;C.registerCallback(function(b){b.hasErrors?l.a(a.element,"error"):l.c(a.element,"error")});C.registerActionCallback(v.b,function(a,b){return Q(a,b,function(a){return a.isValid()})}(this.updateState.bind(this),function(){return e()({},a.state)}));C.registerActionCallback(v.a,function(a,b){return function(){var c=
[];b().parsedEmails.reduce(function(a,b){var d=b.getValue().toLowerCase();return void 0===a[d]&&(a[d]=!0,c.push(b)),a},{});a({parsedEmails:c})}}(this.updateState.bind(this),function(){return e()({},a.state)}));C.registerActionCallback(v.e,function(a,b){return Q(a,b,function(a){return!a.isOverLength()})}(this.updateState.bind(this),function(){return e()({},a.state)}))}},{key:"componentWillUpdate",value:function(a){!1===a.loadedList&&this.persistenceHandler.updated(this.state.parsedEmails,a.parsedEmails);
a.loadedList=!1;var b=0!==this.appOptions.limit;return a.parsedEmails.length>=this.appOptions.maxQuantity||b&&a.parsedEmails.length>=this.appOptions.limit?this.onLimitExceeded():this.onLimitNotExceeded(),a}},{key:"onLimitExceeded",value:function(){}},{key:"onLimitNotExceeded",value:function(){}},{key:"shouldComponentUpdate",value:function(a,b){return!this.uiLocker.isLocked()}},{key:"emailCountUpdated",value:function(){this.textboxHandler.emailStateUpdated(this.state)}},{key:"updateChildren",value:function(a){var b=
a.parsedEmails,c=this.callbacks.updateEmailCount;0!==B(b)?c(-1):c(b.length);this.textboxHandler.emailStateUpdated(a)}},{key:"removeEmail",value:function(a){this.updateState({parsedEmails:this.state.parsedEmails.filter(function(b){return b!==a})})}},{key:"removeAllEmails",value:function(){this.updateState({parsedEmails:[]})}},{key:"isValid",value:function(){var a="C",b=N('input[name\x3d"mec_weblab_treatment"]');null!==b&&(a=b.value);"T1"!==a&&this.textboxHandler.forceEmailParse();a=this.state.parsedEmails;
b=this.callbacks.updateEmailCount;0!==B(a)?b(-1):b(a.length);return!C.hasErrors()}},{key:"getParsedEmails",value:function(){return this.state.parsedEmails}},{key:"submit",value:function(){var a=this,b=this.isValid();return(new d.a(function(c,d){b||d({errors:[{type:r.x}]});a.persistenceHandler.submit(a.emailLoader,a.getParsedEmails.bind(a),c,d)})).catch(function(a){throw a;})}},{key:"addEmailsToArea",value:function(a,b){var c=this;!function(a,b,c,d,e){var f=l.m(a),g=[],g=e(g=1<f.length?f.filter(function(a){return 1<=
a.length&&-1!==a.indexOf("@")}):l.l(a));c({parsedEmails:[].concat(n()(b().parsedEmails),n()(g.map(function(a){return d.create(a)})))})}(a,function(){return c.state},this.updateState.bind(this),this.emailFactory,b)}}]),b}(b.a);c.a=a},function(b,c,a){b=a(2);var d=a.n(b);b=a(3);var e=a.n(b),f=a(0),g=null,h=function(){function a(){return d()(this,a),null===g&&(g=this,this.id=0),g}return e()(a,[{key:"generate",value:function(){return++this.id}}]),a}(),k=a(110);a=function(){function a(b){var c=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:f.i,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:f.i,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:k.v4;d()(this,a);this.classObj=b;this.removeFn=c;this.clickSelector=e;this.uuid=g;this.counter=new h;this.textboxFactory=null}return e()(a,[{key:"setTexboxFactory",value:function(a){this.textboxFactory=a}},{key:"create",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=2<arguments.length&&void 0!==arguments[2]&&
arguments[2];return new this.classObj(a,this.removeFn,this.counter.generate(),null===b?this.uuid.v4():b,this.textboxFactory,this.clickSelector,c)}}]),a}();c.a=a},function(b,c,a){a(116);var d=a(11).Object;b.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(b,c,a){b=a(18);b(b.S+b.F*!a(23),"Object",{defineProperty:a(21).f})},function(b,c,a){b.exports={default:a(118),__esModule:!0}},function(b,c,a){a(58);a(82);b.exports=a(66).f("iterator")},function(b,c,a){var d=a(59),e=a(60);b.exports=
function(a){return function(b,c){var k,q;b=String(e(b));c=d(c);var p=b.length;return 0>c||c>=p?a?"":void 0:55296>(k=b.charCodeAt(c))||56319<k||c+1===p||56320>(q=b.charCodeAt(c+1))||57343<q?a?b.charAt(c):k:a?b.slice(c,c+2):q-56320+(k-55296<<10)+65536}}},function(b,c,a){var d=a(61),e=a(36),f=a(46),g={};a(28)(g,a(16)("iterator"),function(){return this});b.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)});f(a,b+" Iterator")}},function(b,c,a){var d=a(21),e=a(22),f=a(39);b.exports=a(23)?Object.defineProperties:
function(a,b){e(a);for(var c,q=f(b),p=q.length,n=0;p>n;)d.f(a,c=q[n++],b[c]);return a}},function(b,c,a){var d=a(30),e=a(62),f=a(123);b.exports=function(a){return function(b,c,q){var p;b=d(b);var n=e(b.length);q=f(q,n);if(a&&c!=c)for(;n>q;){if((p=b[q++])!=p)return!0}else for(;n>q;q++)if((a||q in b)&&b[q]===c)return a||q||0;return!a&&-1}}},function(b,c,a){var d=a(59),e=Math.max,f=Math.min;b.exports=function(a,b){return 0>(a=d(a))?e(a+b,0):f(a,b)}},function(b,c,a){c=a(125);var d=a(126),e=a(38),f=a(30);
b.exports=a(76)(Array,"Array",function(a,b){this._t=f(a);this._i=0;this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,d(1)):d(0,"keys"==b?c:"values"==b?a[c]:[c,a[c]])},"values");e.Arguments=e.Array;c("keys");c("values");c("entries")},function(b,c){b.exports=function(){}},function(b,c){b.exports=function(a,b){return{value:b,done:!!a}}},function(b,c,a){b.exports={default:a(128),__esModule:!0}},function(b,c,a){a(129);a(84);a(134);a(135);b.exports=a(11).Symbol},
function(b,c,a){b=a(15);var d=a(29),e=a(23);c=a(18);var f=a(77),g=a(130).KEY,h=a(32),k=a(64),q=a(46),p=a(45),n=a(16),m=a(66),v=a(67),t=a(131),l=a(132),u=a(22),r=a(25),w=a(33),y=a(30),A=a(57),z=a(36),x=a(61),D=a(133),O=a(69),F=a(68),G=a(21),E=a(39),J=O.f,H=G.f,K=D.f,C=b.Symbol,N=b.JSON,B=N&&N.stringify,I=n("_hidden"),Q=n("toPrimitive"),W={}.propertyIsEnumerable,T=k("symbol-registry"),P=k("symbols"),U=k("op-symbols"),L=Object.prototype,k="function"==typeof C&&!!F.f,S=b.QObject,Y=!S||!S.prototype||!S.prototype.findChild,
Z=e&&h(function(){return 7!=x(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=J(L,b);d&&delete L[b];H(a,b,c);d&&a!==L&&H(L,b,d)}:H,ba=function(a){var b=P[a]=x(C.prototype);return b._k=a,b},aa=k&&"symbol"==typeof C.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof C},X=function(a,b,c){return a===L&&X(U,b,c),u(a),b=A(b,!0),u(c),d(P,b)?(c.enumerable?(d(a,I)&&a[I][b]&&(a[I][b]=!1),c=x(c,{enumerable:z(0,!1)})):(d(a,I)||H(a,I,z(1,{})),a[I][b]=
!0),Z(a,b,c)):H(a,b,c)},ca=function(a,b){u(a);for(var c,d=t(b=y(b)),e=0,f=d.length;f>e;)X(a,c=d[e++],b[c]);return a},da=function(a){var b=W.call(this,a=A(a,!0));return!(this===L&&d(P,a)&&!d(U,a))&&(!(b||!d(this,a)||!d(P,a)||d(this,I)&&this[I][a])||b)},S=function(a,b){if(a=y(a),b=A(b,!0),a!==L||!d(P,b)||d(U,b)){var c=J(a,b);return!c||!d(P,b)||d(a,I)&&a[I][b]||(c.enumerable=!0),c}},R=function(a){var b;a=K(y(a));for(var c=[],e=0;a.length>e;)d(P,b=a[e++])||b==I||b==g||c.push(b);return c},V=function(a){var b,
c=a===L;a=K(c?U:y(a));for(var e=[],f=0;a.length>f;)!d(P,b=a[f++])||c&&!d(L,b)||e.push(P[b]);return e};k||(f((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var a=p(0<arguments.length?arguments[0]:void 0),b=function(c){this===L&&b.call(U,c);d(this,I)&&d(this[I],a)&&(this[I][a]=!1);Z(this,a,z(1,c))};return e&&Y&&Z(L,a,{configurable:!0,set:b}),ba(a)}).prototype,"toString",function(){return this._k}),O.f=S,G.f=X,a(83).f=D.f=R,a(47).f=da,F.f=V,e&&!a(37)&&f(L,"propertyIsEnumerable",
da,!0),m.f=function(a){return ba(n(a))});c(c.G+c.W+c.F*!k,{Symbol:C});f="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" ");for(m=0;f.length>m;)n(f[m++]);E=E(n.store);for(f=0;E.length>f;)v(E[f++]);c(c.S+c.F*!k,"Symbol",{for:function(a){return d(T,a+="")?T[a]:T[a]=C(a)},keyFor:function(a){if(!aa(a))throw TypeError(a+" is not a symbol!");for(var b in T)if(T[b]===a)return b},useSetter:function(){Y=!0},useSimple:function(){Y=!1}});
c(c.S+c.F*!k,"Object",{create:function(a,b){return void 0===b?x(a):ca(x(a),b)},defineProperty:X,defineProperties:ca,getOwnPropertyDescriptor:S,getOwnPropertyNames:R,getOwnPropertySymbols:V});v=h(function(){F.f(1)});c(c.S+c.F*v,"Object",{getOwnPropertySymbols:function(a){return F.f(w(a))}});N&&c(c.S+c.F*(!k||h(function(){var a=C();return"[null]"!=B([a])||"{}"!=B({a:a})||"{}"!=B(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);if(c=b=d[1],
(r(b)||void 0!==a)&&!aa(a))return l(b)||(b=function(a,b){if("function"==typeof c&&(b=c.call(this,a,b)),!aa(b))return b}),d[1]=b,B.apply(N,d)}});C.prototype[Q]||a(28)(C.prototype,Q,C.prototype.valueOf);q(C,"Symbol");q(Math,"Math",!0);q(b.JSON,"JSON",!0)},function(b,c,a){var d=a(45)("meta"),e=a(25),f=a(29),g=a(21).f,h=0,k=Object.isExtensible||function(){return!0},q=!a(32)(function(){return k(Object.preventExtensions({}))}),p=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},n=b.exports={KEY:d,NEED:!1,fastKey:function(a,
b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!k(a))return"F";if(!b)return"E";p(a)}return a[d].i},getWeak:function(a,b){if(!f(a,d)){if(!k(a))return!0;if(!b)return!1;p(a)}return a[d].w},onFreeze:function(a){return q&&n.NEED&&k(a)&&!f(a,d)&&p(a),a}}},function(b,c,a){var d=a(39),e=a(68),f=a(47);b.exports=function(a){var b=d(a),c=e.f;if(c)for(var q,c=c(a),p=f.f,n=0;c.length>n;)p.call(a,q=c[n++])&&b.push(q);return b}},function(b,c,a){var d=a(40);b.exports=Array.isArray||
function(a){return"Array"==d(a)}},function(b,c,a){var d=a(30),e=a(83).f,f={}.toString,g="object"==typeof D&&D&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(D):[];b.exports.f=function(a){var b;if(g&&"[object Window]"==f.call(a))try{b=e(a)}catch(c){b=g.slice()}else b=e(d(a));return b}},function(b,c,a){a(67)("asyncIterator")},function(b,c,a){a(67)("observable")},function(b,c,a){a(137);b.exports=a(11).Object.assign},function(b,c,a){b=a(18);b(b.S+b.F,"Object",{assign:a(138)})},function(b,c,a){var d=
a(23),e=a(39),f=a(68),g=a(47),h=a(33),k=a(79),q=Object.assign;b.exports=!q||a(32)(function(){var a={},b={},c=Symbol();return a[c]=7,"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a}),7!=q({},a)[c]||"abcdefghijklmnopqrst"!=Object.keys(q({},b)).join("")})?function(a,b){for(var c=h(a),q=arguments.length,t=1,l=f.f,u=g.f;q>t;)for(var r,w=k(arguments[t++]),y=l?e(w).concat(l(w)):e(w),A=y.length,z=0;A>z;)r=y[z++],d&&!u.call(w,r)||(c[r]=w[r]);return c}:q},function(b,c,a){a(140);b.exports=a(11).Object.getPrototypeOf},
function(b,c,a){var d=a(33),e=a(81);a(70)("getPrototypeOf",function(){return function(a){return e(d(a))}})},function(b,c,a){b.exports={default:a(142),__esModule:!0}},function(b,c,a){a(143);b.exports=a(11).Object.setPrototypeOf},function(b,c,a){b=a(18);b(b.S,"Object",{setPrototypeOf:a(144).set})},function(b,c,a){var d=a(25),e=a(22),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!");};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,d){try{(d=a(31)(Function.call,
a(69).f(Object.prototype,"__proto__").set,2))(b,[]),c=!(b instanceof Array)}catch(e){c=!0}return function(a,b){return f(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:f}},function(b,c,a){b.exports={default:a(146),__esModule:!0}},function(b,c,a){a(147);var d=a(11).Object;b.exports=function(a,b){return d.create(a,b)}},function(b,c,a){b=a(18);b(b.S,"Object",{create:a(61)})},function(b,c,a){a(149);b.exports=a(11).Object.keys},function(b,c,a){var d=a(33),e=a(39);a(70)("keys",function(){return function(a){return e(d(a))}})},
function(b,c,a){var d=a(151),e=a(53);b.exports=function g(a,b,c,p,n){return a===b||(null==a||null==b||!e(a)&&!e(b)?a!=a&&b!=b:d(a,b,c,p,g,n))}},function(b,c,a){var d=a(152),e=a(91),f=a(187),g=a(191),h=a(213),k=a(73),q=a(92),p=a(94),n=Object.prototype.hasOwnProperty;b.exports=function(a,b,c,l,u,r){var w=k(a),y=k(b),A=w?"[object Array]":h(a),z=y?"[object Array]":h(b),x="[object Object]"==(A="[object Arguments]"==A?"[object Object]":A),y="[object Object]"==(z="[object Arguments]"==z?"[object Object]":
z);if((z=A==z)&&q(a)){if(!q(b))return!1;w=!0;x=!1}return z&&!x?(r||(r=new d),w||p(a)?e(a,b,c,l,u,r):f(a,b,A,c,l,u,r)):c&1||(w=x&&n.call(a,"__wrapped__"),A=y&&n.call(b,"__wrapped__"),!w&&!A)?!!z&&(r||(r=new d),g(a,b,c,l,u,r)):(a=w?a.value():a,b=A?b.value():b,r||(r=new d),u(a,b,c,l,r))}},function(b,c,a){function d(a){this.size=(this.__data__=new e(a)).size}var e=a(48);c=a(158);var f=a(159),g=a(160),h=a(161);a=a(162);d.prototype.clear=c;d.prototype.delete=f;d.prototype.get=g;d.prototype.has=h;d.prototype.set=
a;b.exports=d},function(b,c){b.exports=function(){this.__data__=[];this.size=0}},function(b,c,a){var d=a(49),e=Array.prototype.splice;b.exports=function(a){var b=this.__data__;a=d(b,a);return!(0>a||(a==b.length-1?b.pop():e.call(b,a,1),--this.size,0))}},function(b,c,a){var d=a(49);b.exports=function(a){var b=this.__data__;a=d(b,a);return 0>a?void 0:b[a][1]}},function(b,c,a){var d=a(49);b.exports=function(a){return-1<d(this.__data__,a)}},function(b,c,a){var d=a(49);b.exports=function(a,b){var c=this.__data__,
h=d(c,a);return 0>h?(++this.size,c.push([a,b])):c[h][1]=b,this}},function(b,c,a){var d=a(48);b.exports=function(){this.__data__=new d;this.size=0}},function(b,c){b.exports=function(a){var b=this.__data__;a=b.delete(a);return this.size=b.size,a}},function(b,c){b.exports=function(a){return this.__data__.get(a)}},function(b,c){b.exports=function(a){return this.__data__.has(a)}},function(b,c,a){var d=a(48),e=a(71),f=a(90);b.exports=function(a,b){var c=this.__data__;if(c instanceof d){var q=c.__data__;
if(!e||199>q.length)return q.push([a,b]),this.size=++c.size,this;c=this.__data__=new f(q)}return c.set(a,b),this.size=c.size,this}},function(b,c,a){var d=a(86),e=a(167),f=a(88),g=a(89),h=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=function(a){return!(!f(a)||e(a))&&(d(a)?k:h).test(g(a))}},function(b,c){c=function(){return this}();
try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof D&&(c=D)}b.exports=c},function(b,c,a){c=a(72);a=Object.prototype;var d=a.hasOwnProperty,e=a.toString,f=c?c.toStringTag:void 0;b.exports=function(a){var b=d.call(a,f),c=a[f];try{a[f]=void 0;var q=!0}catch(n){}var p=e.call(a);return q&&(b?a[f]=c:delete a[f]),p}},function(b,c){var a=Object.prototype.toString;b.exports=function(b){return a.call(b)}},function(b,c,a){var d=a(168),e=function(){var a=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||
"");return a?"Symbol(src)_1."+a:""}();b.exports=function(a){return!!e&&e in a}},function(b,c,a){c=a(24)["__core-js_shared__"];b.exports=c},function(b,c){b.exports=function(a,b){return null==a?void 0:a[b]}},function(b,c,a){var d=a(171),e=a(48),f=a(71);b.exports=function(){this.size=0;this.__data__={hash:new d,map:new (f||e),string:new d}}},function(b,c,a){function d(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}c=a(172);var e=a(173),f=a(174),g=a(175);a=a(176);
d.prototype.clear=c;d.prototype.delete=e;d.prototype.get=f;d.prototype.has=g;d.prototype.set=a;b.exports=d},function(b,c,a){var d=a(51);b.exports=function(){this.__data__=d?d(null):{};this.size=0}},function(b,c){b.exports=function(a){a=this.has(a)&&delete this.__data__[a];return this.size-=a?1:0,a}},function(b,c,a){var d=a(51),e=Object.prototype.hasOwnProperty;b.exports=function(a){var b=this.__data__;return d?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):e.call(b,a)?b[a]:void 0}},function(b,
c,a){var d=a(51),e=Object.prototype.hasOwnProperty;b.exports=function(a){var b=this.__data__;return d?void 0!==b[a]:e.call(b,a)}},function(b,c,a){var d=a(51);b.exports=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=d&&void 0===b?"__lodash_hash_undefined__":b,this}},function(b,c,a){var d=a(52);b.exports=function(a){a=d(this,a).delete(a);return this.size-=a?1:0,a}},function(b,c){b.exports=function(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?
"__proto__"!==a:null===a}},function(b,c,a){var d=a(52);b.exports=function(a){return d(this,a).get(a)}},function(b,c,a){var d=a(52);b.exports=function(a){return d(this,a).has(a)}},function(b,c,a){var d=a(52);b.exports=function(a,b){var c=d(this,a),h=c.size;return c.set(a,b),this.size+=c.size==h?0:1,this}},function(b,c,a){function d(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new e;++b<c;)this.add(a[b])}var e=a(90);c=a(183);a=a(184);d.prototype.add=d.prototype.push=c;d.prototype.has=a;b.exports=
d},function(b,c){b.exports=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this}},function(b,c){b.exports=function(a){return this.__data__.has(a)}},function(b,c){b.exports=function(a,b){for(var c=-1,f=null==a?0:a.length;++c<f;)if(b(a[c],c,a))return!0;return!1}},function(b,c){b.exports=function(a,b){return a.has(b)}},function(b,c,a){c=a(72);var d=a(188),e=a(85),f=a(91),g=a(189),h=a(190),k=(a=c?c.prototype:void 0)?a.valueOf:void 0;b.exports=function(a,b,c,m,v,t,l){switch(c){case "[object DataView]":if(a.byteLength!=
b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":return!(a.byteLength!=b.byteLength||!t(new d(a),new d(b)));case "[object Boolean]":case "[object Date]":case "[object Number]":return e(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var u=g;case "[object Set]":if(u||(u=h),a.size!=b.size&&!(m&1))break;if(c=l.get(a))return c==b;m|=2;l.set(a,b);b=f(u(a),
u(b),m,v,t,l);return l.delete(a),b;case "[object Symbol]":if(k)return k.call(a)==k.call(b)}return!1}},function(b,c,a){c=a(24).Uint8Array;b.exports=c},function(b,c){b.exports=function(a){var b=-1,c=Array(a.size);return a.forEach(function(a,g){c[++b]=[g,a]}),c}},function(b,c){b.exports=function(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}},function(b,c,a){var d=a(192),e=Object.prototype.hasOwnProperty;b.exports=function(a,b,c,k,q,p){var n=c&1,m=d(a),v=m.length;if(v!=d(b).length&&
!n)return!1;for(var t=v;t--;){var l=m[t];if(!(n?l in b:e.call(b,l)))return!1}var u=p.get(a),l=p.get(b);if(u&&l)return u==b&&l==a;u=!0;p.set(a,b);p.set(b,a);for(var r=n;++t<v;){var w=a[l=m[t]],y=b[l];if(k)var A=n?k(y,w,l,b,a,p):k(w,y,l,a,b,p);if(void 0===A?w!==y&&!q(w,y,c,k,p):!A){u=!1;break}r||(r="constructor"==l)}u&&!r&&(c=a.constructor,k=b.constructor,c!=k&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof k&&k instanceof k)&&(u=!1));return p.delete(a),
p.delete(b),u}},function(b,c,a){var d=a(193),e=a(195),f=a(198);b.exports=function(a){return d(a,f,e)}},function(b,c,a){var d=a(194),e=a(73);b.exports=function(a,b,c){b=b(a);return e(a)?b:d(b,c(a))}},function(b,c){b.exports=function(a,b){for(var c=-1,f=b.length,g=a.length;++c<f;)a[g+c]=b[c];return a}},function(b,c,a){var d=a(196);c=a(197);var e=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols;b.exports=f?function(a){return null==a?[]:(a=Object(a),d(f(a),function(b){return e.call(a,
b)}))}:c},function(b,c){b.exports=function(a,b){for(var c=-1,f=null==a?0:a.length,g=0,h=[];++c<f;){var k=a[c];b(k,c,a)&&(h[g++]=k)}return h}},function(b,c){b.exports=function(){return[]}},function(b,c,a){var d=a(199),e=a(208),f=a(212);b.exports=function(a){return f(a)?d(a):e(a)}},function(b,c,a){var d=a(200),e=a(201),f=a(73),g=a(92),h=a(204),k=a(94),q=Object.prototype.hasOwnProperty;b.exports=function(a,b){var c=f(a),v=!c&&e(a),t=!c&&!v&&g(a),l=!c&&!v&&!t&&k(a),v=(c=c||v||t||l)?d(a.length,String):
[],u=v.length,r;for(r in a)!b&&!q.call(a,r)||c&&("length"==r||t&&("offset"==r||"parent"==r)||l&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||h(r,u))||v.push(r);return v}},function(b,c){b.exports=function(a,b){for(var c=-1,f=Array(a);++c<a;)f[c]=b(c);return f}},function(b,c,a){c=a(202);var d=a(53);a=Object.prototype;var e=a.hasOwnProperty,f=a.propertyIsEnumerable;a=c(function(){return arguments}())?c:function(a){return d(a)&&e.call(a,"callee")&&!f.call(a,"callee")};b.exports=a},function(b,c,a){var d=
a(50),e=a(53);b.exports=function(a){return e(a)&&"[object Arguments]"==d(a)}},function(b,c){b.exports=function(){return!1}},function(b,c){var a=/^(?:0|[1-9]\d*)$/;b.exports=function(b,c){var f=typeof b;return!!(c=null==c?9007199254740991:c)&&("number"==f||"symbol"!=f&&a.test(b))&&-1<b&&0==b%1&&b<c}},function(b,c,a){var d=a(50),e=a(95),f=a(53),g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=
g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0;g["[object Arguments]"]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g["[object Map]"]=g["[object Number]"]=g["[object Object]"]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;b.exports=function(a){return f(a)&&e(a.length)&&!!g[d(a)]}},function(b,c){b.exports=function(a){return function(b){return a(b)}}},
function(b,c,a){b=a(93)(b);a=a(87);var d="object"==typeof c&&c&&!c.nodeType&&c;a=(c=d&&"object"==typeof b&&b&&!b.nodeType&&b)&&c.exports===d&&a.process;var e;a:{try{e=c&&c.require&&c.require("util").types||a&&a.binding&&a.binding("util");break a}catch(f){}e=void 0}b.exports=e},function(b,c,a){var d=a(209),e=a(210),f=Object.prototype.hasOwnProperty;b.exports=function(a){if(!d(a))return e(a);var b=[],c;for(c in Object(a))f.call(a,c)&&"constructor"!=c&&b.push(c);return b}},function(b,c){var a=Object.prototype;
b.exports=function(b){var c=b&&b.constructor;return b===("function"==typeof c&&c.prototype||a)}},function(b,c,a){c=a(211)(Object.keys,Object);b.exports=c},function(b,c){b.exports=function(a,b){return function(c){return a(b(c))}}},function(b,c,a){var d=a(86),e=a(95);b.exports=function(a){return null!=a&&e(a.length)&&!d(a)}},function(b,c,a){c=a(214);var d=a(71),e=a(215),f=a(216),g=a(217),h=a(50),k=a(89),q=k(c),p=k(d),n=k(e),m=k(f),v=k(g);a=h;(c&&"[object DataView]"!=a(new c(new ArrayBuffer(1)))||d&&
"[object Map]"!=a(new d)||e&&"[object Promise]"!=a(e.resolve())||f&&"[object Set]"!=a(new f)||g&&"[object WeakMap]"!=a(new g))&&(a=function(a){var b=h(a);if(a=(a="[object Object]"==b?a.constructor:void 0)?k(a):"")switch(a){case q:return"[object DataView]";case p:return"[object Map]";case n:return"[object Promise]";case m:return"[object Set]";case v:return"[object WeakMap]"}return b});b.exports=a},function(b,c,a){c=a(34)(a(24),"DataView");b.exports=c},function(b,c,a){c=a(34)(a(24),"Promise");b.exports=
c},function(b,c,a){c=a(34)(a(24),"Set");b.exports=c},function(b,c,a){c=a(34)(a(24),"WeakMap");b.exports=c},function(b,c,a){a(219);var d=a(11).Object;b.exports=function(a,b){return d.getOwnPropertyDescriptor(a,b)}},function(b,c,a){var d=a(30),e=a(69).f;a(70)("getOwnPropertyDescriptor",function(){return function(a,b){return e(d(a),b)}})},function(b,c,a){b.exports={default:a(221),__esModule:!0}},function(b,c,a){a(58);a(222);b.exports=a(11).Array.from},function(b,c,a){var d=a(31);b=a(18);var e=a(33),
f=a(96),g=a(97),h=a(62),k=a(223),q=a(98);b(b.S+b.F*!a(100)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,v;v=e(a);c="function"==typeof this?this:Array;b=arguments.length;var t=1<b?arguments[1]:void 0,l=void 0!==t,u=0,r=q(v);if(l&&(t=d(t,2<b?arguments[2]:void 0,2)),void 0==r||c==Array&&g(r))for(c=new c(b=h(v.length));b>u;u++)k(c,u,l?t(v[u],u):v[u]);else for(v=r.call(v),c=new c;!(b=v.next()).done;u++)k(c,u,l?f(v,t,[b.value,u],!0):b.value);return c.length=u,c}})},function(b,c,a){var d=
a(21),e=a(36);b.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},function(b,c,a){a(84);a(58);a(82);a(225);a(233);a(234);b.exports=a(11).Promise},function(b,c,a){var d,e,f,g,h=a(37),k=a(15),q=a(31),p=a(99);b=a(18);var n=a(25),m=a(44),v=a(226),t=a(227),l=a(101),u=a(102).set,r=a(229)();c=a(74);var w=a(103),y=a(230),A=a(104),z=k.TypeError,x=k.process,D=x&&x.versions,O=D&&D.v8||"",F=k.Promise,G="process"==p(x),E=function(){},J=e=c.f,p=!!function(){try{var b=F.resolve(1),c=(b.constructor={})[a(16)("species")]=
function(a){a(E,E)};return(G||"function"==typeof PromiseRejectionEvent)&&b.then(E)instanceof c&&0!==O.indexOf("6.6")&&-1===y.indexOf("Chrome/66")}catch(d){}}(),H=function(a){var b;return!(!n(a)||"function"!=typeof(b=a.then))&&b},K=function(a,b){if(!a._n){a._n=!0;var c=a._c;r(function(){for(var d=a._v,e=1==a._s,f=0;c.length>f;){var g=c[f++],k=void 0,h=void 0,n=void 0,l=e?g.ok:g.fail,q=g.resolve,m=g.reject,p=g.domain;try{l?(e||(2==a._h&&N(a),a._h=1),!0===l?k=d:(p&&p.enter(),k=l(d),p&&(p.exit(),n=!0)),
k===g.promise?m(z("Promise-chain cycle")):(h=H(k))?h.call(k,q,m):q(k)):m(d)}catch(J){p&&!n&&p.exit(),m(J)}}a._c=[];a._n=!1;b&&!a._h&&C(a)})}},C=function(a){u.call(k,function(){var b,c,d,e=a._v,f=1!==a._h&&0===(a._a||a._c).length;if(f&&(b=w(function(){G?x.emit("unhandledRejection",e,a):(c=k.onunhandledrejection)?c({promise:a,reason:e}):(d=k.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=G||1!==a._h&&0===(a._a||a._c).length?2:1),a._a=void 0,f&&b.e)throw b.v;})},N=function(a){u.call(k,
function(){var b;G?x.emit("rejectionHandled",a):(b=k.onrejectionhandled)&&b({promise:a,reason:a._v})})},B=function(a){var b=this;b._d||(b._d=!0,(b=b._w||b)._v=a,b._s=2,b._a||(b._a=b._c.slice()),K(b,!0))},I=function(a){var b,c=this;if(!c._d){c._d=!0;c=c._w||c;try{if(c===a)throw z("Promise can't be resolved itself");(b=H(a))?r(function(){var d={_w:c,_d:!1};try{b.call(a,q(I,d,1),q(B,d,1))}catch(e){B.call(d,e)}}):(c._v=a,c._s=1,K(c,!1))}catch(d){B.call({_w:c,_d:!1},d)}}};p||(F=function(a){v(this,F,"Promise",
"_h");m(a);d.call(this);try{a(q(I,this,1),q(B,this,1))}catch(b){B.call(this,b)}},(d=function(a){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1}).prototype=a(231)(F.prototype,{then:function(a,b){var c=J(l(this,F));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=G?x.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&K(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=
a;this.resolve=q(I,a,1);this.reject=q(B,a,1)},c.f=J=function(a){return a===F||a===g?new f(a):e(a)});b(b.G+b.W+b.F*!p,{Promise:F});a(46)(F,"Promise");a(232)("Promise");g=a(11).Promise;b(b.S+b.F*!p,"Promise",{reject:function(a){var b=J(this);return(0,b.reject)(a),b.promise}});b(b.S+b.F*(h||!p),"Promise",{resolve:function(a){return A(h&&this===g?F:this,a)}});b(b.S+b.F*!(p&&a(100)(function(a){F.all(a).catch(E)})),"Promise",{all:function(a){var b=this,c=J(b),d=c.resolve,e=c.reject,f=w(function(){var c=
[],f=0,g=1;t(a,!1,function(a){var k=f++,h=!1;c.push(void 0);g++;b.resolve(a).then(function(a){h||(h=!0,c[k]=a,--g||d(c))},e)});--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=J(b),d=c.reject,e=w(function(){t(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},function(b,c){b.exports=function(a,b,c,f){if(!(a instanceof b)||void 0!==f&&f in a)throw TypeError(c+": incorrect invocation!");return a}},function(b,c,a){var d=a(31),e=a(96),f=a(97),g=
a(22),h=a(62),k=a(98),q={},p={};(c=b.exports=function(a,b,c,t,l){var u,r;l=l?function(){return a}:k(a);c=d(c,t,b?2:1);t=0;if("function"!=typeof l)throw TypeError(a+" is not iterable!");if(f(l))for(l=h(a.length);l>t;t++){if((r=b?c(g(u=a[t])[0],u[1]):c(a[t]))===q||r===p)return r}else for(l=l.call(a);!(u=l.next()).done;)if((r=e(l,c,u.value,b))===q||r===p)return r}).BREAK=q;c.RETURN=p},function(b,c){b.exports=function(a,b,c){var f=void 0===c;switch(b.length){case 0:return f?a():a.call(c);case 1:return f?
a(b[0]):a.call(c,b[0]);case 2:return f?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return f?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return f?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},function(b,c,a){var d=a(15),e=a(102).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,k="process"==a(40)(g);b.exports=function(){var a,b,c,m=function(){var d,e;for(k&&(d=g.domain)&&d.exit();a;){e=a.fn;a=a.next;try{e()}catch(f){throw a?c():b=void 0,f;}}b=
void 0;d&&d.enter()};if(k)c=function(){g.nextTick(m)};else if(!f||d.navigator&&d.navigator.standalone)if(h&&h.resolve){var v=h.resolve(void 0);c=function(){v.then(m)}}else c=function(){e.call(d,m)};else{var t=!0,l=document.createTextNode("");(new f(m)).observe(l,{characterData:!0});c=function(){l.data=t=!t}}return function(d){d={fn:d,next:void 0};b&&(b.next=d);a||(a=d,c());b=d}}},function(b,c,a){c=a(15).navigator;b.exports=c&&c.userAgent||""},function(b,c,a){var d=a(28);b.exports=function(a,b,c){for(var h in b)c&&
a[h]?a[h]=b[h]:d(a,h,b[h]);return a}},function(b,c,a){var d=a(15),e=a(11),f=a(21),g=a(23),h=a(16)("species");b.exports=function(a){a="function"==typeof e[a]?e[a]:d[a];g&&a&&!a[h]&&f.f(a,h,{configurable:!0,get:function(){return this}})}},function(b,c,a){b=a(18);var d=a(11),e=a(15),f=a(101),g=a(104);b(b.P+b.R,"Promise",{finally:function(a){var b=f(this,d.Promise||e.Promise),c="function"==typeof a;return this.then(c?function(c){return g(b,a()).then(function(){return c})}:a,c?function(c){return g(b,a()).then(function(){throw c;
})}:a)}})},function(b,c,a){b=a(18);var d=a(74),e=a(103);b(b.S,"Promise",{try:function(a){var b=d.f(this);a=e(a);return(a.e?b.reject:b.resolve)(a.v),b.promise}})},function(b,c,a){c=a(11);var d=c.JSON||(c.JSON={stringify:JSON.stringify});b.exports=function(a){return d.stringify.apply(d,arguments)}},function(b,c,a){var d,e,f=a(105),g=a(106),h=0,k=0;b.exports=function(a,b,c){c=b&&c||0;var m=b||[],v=(a=a||{}).node||d,t=void 0!==a.clockseq?a.clockseq:e;if(null==v||null==t){var l=f();null==v&&(v=d=[1|l[0],
l[1],l[2],l[3],l[4],l[5]]);null==t&&(t=e=16383&(l[6]<<8|l[7]))}var l=void 0!==a.msecs?a.msecs:(new Date).getTime(),u=void 0!==a.nsecs?a.nsecs:k+1,r=l-h+(u-k)/1E4;if(0>r&&void 0===a.clockseq&&(t=t+1&16383),(0>r||l>h)&&void 0===a.nsecs&&(u=0),1E4<=u)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");h=l;k=u;e=t;a=(1E4*(268435455&(l+=122192928E5))+u)%4294967296;m[c++]=a>>>24&255;m[c++]=a>>>16&255;m[c++]=a>>>8&255;m[c++]=255&a;a=l/4294967296*1E4&268435455;m[c++]=a>>>8&255;m[c++]=255&a;m[c++]=
a>>>24&15|16;m[c++]=a>>>16&255;m[c++]=t>>>8|128;m[c++]=255&t;for(t=0;6>t;++t)m[c+t]=v[t];return b||g(m)}},function(b,c,a){var d=a(105),e=a(106);b.exports=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);var k=(a=a||{}).random||(a.rng||d)();if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,b)for(a=0;16>a;++a)b[c+a]=k[a];return b||e(k)}},function(b,c,a){},,function(b,c,a){a.r(c);a(238);var d=a(55),e=a(112);b=a(5);var f=a.n(b);b=a(4);var g=a.n(b);b=a(2);var h=a.n(b);b=a(3);var k=
a.n(b);b=a(6);var q=a.n(b);b=a(9);var p=a.n(b);b=a(7);var n=a.n(b);b=(a(8),a(108));var m=a(0),v=function(a){function b(){return h()(this,b),q()(this,(b.__proto__||g()(b)).apply(this,arguments))}return n()(b,a),k()(b,[{key:"create",value:function(){var a=Object(m.d)("li",{role:"option",id:this.state.uuid,className:this.loadable?"mec-tab loadable":"mec-tab"});this.textElement=Object(m.d)("span",{className:this.loadable?"mec-tab-email stub":"mec-tab-email",textContent:this.state.value});var b=Object(m.d)("span",
{className:"close-icon-wrapper",innerHTML:'\x3ci class\x3d"icon icon-close"\x3e\x3c/i\x3e'});return a.appendChild(this.textElement),a.appendChild(b),this.ref=a,this.loadable||this.registerEvents(b),a}},{key:"markAsError",value:function(a){null!==this.ref&&(Object(m.a)(this.ref,"error"),this.switchBindings("click","dblclick"));this.state.errors[a]=!0;this.updateState({errors:this.state.errors})}},{key:"clearError",value:function(){null!==this.ref&&(Object(m.c)(this.ref,"error"),this.switchBindings("dblclick",
"click"));this.updateState({errors:{}})}},{key:"registerEvents",value:function(a){var b=this;Object(m.k)(a,"click",function(a){return b.removeFn(b)});Object(m.k)(this.textElement,"dblclick",this.changeToEditMode);Object(m.k)(this.ref,"click",this.clickSelector.bind(null,this))}}]),b}(b.a),t=a(43),l=a(1),u=function(){function a(){h()(this,a)}return k()(a,null,[{key:"handle",value:function(a){return a}}]),a}(),r=a(26),w=function(a){function b(){return h()(this,b),q()(this,(b.__proto__||g()(b)).apply(this,
arguments))}return n()(b,a),k()(b,[{key:"create",value:function(){p()(b.prototype.__proto__||g()(b.prototype),"create",this).call(this,"textarea",{rows:"1"});Object(r.a)()&&p()(b.prototype.__proto__||g()(b.prototype),"setAriaDescribedBy",this).call(this,[l.F,l.B,l.A,l.G]);this.ref.style.width=t.a+"px"}},{key:"displayPlaceholderText",value:function(){this.ref.setAttribute("placeholder",this.placeHolderData.text);this.shadowElement.textContent=this.placeHolderData.text;this.placeHolderData.width=this.shadowElement.scrollWidth;
this.shadowElement.textContent="";this.ref.style.width=this.placeHolderData.width+t.a+"px";this.showPlaceholder=!0}},{key:"render",value:function(){(this.shadowElement.textContent=this.state.value,this.ref.value!==this.state.value&&(this.ref.value=this.state.value),0===this.ref.value.length&&this.showPlaceholder)?this.ref.style.width=this.placeHolderData.width+t.a+"px":this.ref.style.width=this.shadowElement.scrollWidth+t.a+"px"}},{key:"emailPrehandler",value:function(a){return u.handle(a)}}]),b}(t.b);
b=a(113);var y=a(114),A=function(a){function b(){return h()(this,b),q()(this,(b.__proto__||g()(b)).apply(this,arguments))}return n()(b,a),k()(b,[{key:"init",value:function(a){Object(r.a)()?this.el=this.textboxFactory.create(a,l.s):(this.el=this.textboxFactory.create(a,l.I),this.el.setAriaLabel(this.language.getString(l.I)+" "+this.language.getString(l.l)))}},{key:"insertIntoDOM",value:function(a){a.parentNode.appendChild(this.el.getShadowRef());a.appendChild(this.el.getRef())}},{key:"emailStateUpdated",
value:function(a){0===a.parsedEmails.length?this.el.displayPlaceholderText():this.el.removePlaceholderText();if(Object(r.a)())p()(b.prototype.__proto__||g()(b.prototype),"updateErrorAriaElements",this).call(this);else{var c=this.errorSection.getActiveErrors(),d=this.language,e=this.el,f=this.aria,c=this.errorSection.getAriaErrors(c);a=0<c.length?d.getString(l.k)+" "+c.join(" ")+" "+d.getString(l.I)+" "+d.getString(l.l):d.getString(l.J,{AMOUNT:a.parsedEmails.length,MAX:f.state.maxEmailCount})+" "+
d.getString(l.I)+" "+d.getString(l.l);e.setAriaLabel(a)}}}]),b}(a(111).a);c=a(14);var z=a.n(c),x=a(12),D=a(10),O=function(){function a(b,c){h()(this,a);this.selectedSet={};this.lastSelected=null;this.getState=b;this.updateState=c;this.uiLocker=this.tabArea=this.finalField=null;this.language=new D.a}return k()(a,[{key:"init",value:function(){var a=this;Object(m.k)(document.body,"click",function(b){a.resetSelection();Object(m.b)(b.target,"mec-area")||Object(m.b)(b.target,"mec-tab-box")||Object(m.b)(b.target,
"mec-holder-input")||Object(m.c)(a.tabArea,"focus")});Object(m.k)(document.body,"keydown",function(b){var c=b.charCode||b.keyCode||0;if(1<=z()(a.selectedSet).length&&"mec-holder-input"!==b.target.className&&!a.uiLocker.isLocked()){if(Object(m.a)(a.tabArea,"focus"),c===x.i&&!b.shiftKey)return b.preventDefault(),b.stopPropagation(),a.resetSelection(),void a.finalField.focus();if(c===x.i&&b.shiftKey)return void a.resetSelection();switch(b.preventDefault(),b.stopPropagation(),c){case x.b:case x.c:!function(a,
b,c,d,e,g){a=a().parsedEmails;var k=z()(c);c=a.filter(function(a){return-1===k.indexOf(a.getUUID())});1===k.length&&(a=a.filter(function(a){return-1!==k.indexOf(a.getUUID())}),e.assert(g.getString(l.b,{EMAIL:a[0].getValue()})));b({parsedEmails:[].concat(f()(c))});d()}(a.getState,a.updateState,a.selectedSet,a.selectEmailByIndex.bind(a,a.lastSelected),a.aria,a.language);break;case x.f:case x.j:a.moveLeft();break;case x.g:case x.d:a.moveRight();break;case x.e:a.editEmail();break;case x.a:(b.metaKey||
b.ctrlKey)&&a.selectAll(b)}}})}},{key:"setAria",value:function(a){this.aria=a}},{key:"setFinalField",value:function(a){this.finalField=a}},{key:"setTabArea",value:function(a){this.tabArea=a}},{key:"setUILocker",value:function(a){this.uiLocker=a}},{key:"selectAll",value:function(a){var b=this;this.getState().parsedEmails.map(function(c){return b.selectEmail(c,a,!0,!0)})}},{key:"movePillIntoView",value:function(){var a=this.getState().parsedEmails,b=a[this.lastSelected].ref.getBoundingClientRect(),
c=this.tabArea.getBoundingClientRect();(b.top<=c.top||b.bottom>=c.bottom)&&(this.tabArea.scrollTop=a[this.lastSelected].ref.offsetTop-2)}},{key:"editEmail",value:function(){var a=this;this.getState().parsedEmails[this.lastSelected].changeToEditMode({},function(b){return a.selectEmailByIndex(b)}.bind(this,this.lastSelected));this.resetSelection()}},{key:"moveLeft",value:function(){if(0!==this.lastSelected){var a=this.getState().parsedEmails;this.selectEmail(a[this.lastSelected-1]);this.movePillIntoView()}}},
{key:"moveRight",value:function(){var a=this.getState().parsedEmails;this.lastSelected!==a.length-1?(this.selectEmail(a[this.lastSelected+1]),this.movePillIntoView()):(this.finalField.focus(),this.resetSelection())}},{key:"resetSelection",value:function(){var a=this;z()(this.selectedSet).map(function(b){return a.selectedSet[b].removeClass("selected")});this.selectedSet={};this.lastSelected=null}},{key:"selectEmailByIndex",value:function(a){var b=this.getState().parsedEmails;-1===a&&(a=b.length-1);
a>b.length-1&&this.finalField.focus();void 0!==b[a]?(this.selectedSet[b[a].getUUID()]=b[a],this.ariaSelect(b.length,b[a],a),this.lastSelected=a):this.lastSelected=null}},{key:"selectEmail",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{stopPropagation:m.i},c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],d=3<arguments.length&&void 0!==arguments[3]&&arguments[3];b.stopPropagation();var e=this.getState().parsedEmails;void 0===this.selectedSet[a.getUUID()]||
c?(b.metaKey||b.ctrlKey||this.resetSelection(),this.selectedSet[a.getUUID()]=a,b=e.map(function(a){return a.getUUID()}).indexOf(a.getUUID()),this.ariaSelect(e.length,a,b,d),this.lastSelected=b,Object(m.a)(this.tabArea,"focus")):(delete this.selectedSet[a.getUUID()],a.removeClass("selected"))}},{key:"ariaSelect",value:function(a,b,c){var d=this,e=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(b.addClass("selected"),!e){e=b.getAriaValues();this.tabArea.setAttribute("aria-activedescendant",
b.getUUID());var f=e.errors.map(function(a){return d.language.getString(a)});f.push(this.language.getString(l.e,{EMAIL:e.email}));f.push(this.language.getString(l.g,{INDEX:c+1,AMOUNT:a}));f.push(this.language.getString(l.h));this.aria.explain(f.join(" "))}}}]),a}(),F=document.querySelector.bind(document),G=function(a){function b(a,c){h()(this,b);var d=q()(this,(b.__proto__||g()(b)).call(this,a,c));d.uiHandler=new O(function(){return d.state},d.updateState.bind(d));d.uiHandler.setAria(d.aria);d.uiHandler.setUILocker(d.uiLocker);
a=new y.a(v,d.removeEmail.bind(d),d.uiHandler.selectEmail.bind(d.uiHandler));return d.createHandlersNFactories(a,A,w),d}return n()(b,a),k()(b,[{key:"init",value:function(a,c,d,e,k){var h=this;if(p()(b.prototype.__proto__||g()(b.prototype),"init",this).call(this,a,c,d,e,k),null!=this.element){this.uiHandler.init();this.tabArea=this.element.querySelector(".mec-tab-box");this.initErrCallbacks();this.initUI(a);m.k(this.element,"click",function(a){a.target!==h.tabArea&&a.target!==h.element||h.textboxHandler.getRef().focus()});
m.k(this.textboxHandler.getRef(),"focus",function(a){m.a(h.element,"focus")});var n="C";a=F('input[name\x3d"mec_weblab_treatment"]');null!==a&&(n=a.value);m.k(this.textboxHandler.getRef(),"blur",function(a){"T1"===n&&h.textboxHandler.forceEmailParse();h.isValid()});m.k(this.textboxHandler.getRef(),"keydown",function(a){var b=a.charCode||a.keyCode||0;if(b!==x.e&&b!==x.h||(a.preventDefault(),"T1"===n&&h.textboxHandler.forceEmailParse(),h.isValid(),h.textboxHandler.getRef().focus()),b!==x.i)return 0===
a.target.value.length&&0<h.state.parsedEmails.length&&(b===x.b&&(a.preventDefault(),h.aria.assert(h.language.getString(l.b,{EMAIL:h.state.parsedEmails[h.state.parsedEmails.length-1].getValue()})),h.updateState({parsedEmails:[].concat(f()(h.state.parsedEmails.slice(0,-1)))})),b!==x.f&&b!==x.j||(a.preventDefault(),h.uiHandler.selectEmail(h.state.parsedEmails[h.state.parsedEmails.length-1],a),a.target.blur(),m.a(h.element,"focus")),(a.metaKey||a.ctrlKey)&&0===a.target.value.length&&b===x.a&&(a.preventDefault(),
h.textboxHandler.getRef().blur(),m.a(h.element,"focus"),h.uiHandler.selectAll(a)),b!==x.i&&0!==h.appOptions.limit&&h.state.parsedEmails.length>=h.appOptions.limit)?(a.preventDefault(),!1):void 0;m.c(h.element,"focus")});this.emailLoader.load()}}},{key:"initUI",value:function(a){a=a.querySelector(".mec-holder-input");null!==a&&a.parentNode.removeChild(a);this.textboxHandler.insertIntoDOM(this.tabArea);this.textboxHandler.displayPlaceholderText();this.uiHandler.setFinalField(this.textboxHandler.getRef());
this.uiHandler.setTabArea(this.element)}},{key:"addEmails",value:function(a){p()(b.prototype.__proto__||g()(b.prototype),"addEmailsToArea",this).call(this,a,u.handle)}},{key:"render",value:function(){if(document.body.contains(this.textboxHandler.getRef())){if(0===this.state.parsedEmails.length)for(;this.tabArea.firstChild!==this.textboxHandler.getRef();)this.tabArea.removeChild(this.tabArea.firstChild);for(var a=0;a<this.state.parsedEmails.length;a++)a<this.tabArea.children.length-1?this.state.parsedEmails[a].ref!==
this.tabArea.children[a]&&(null===this.state.parsedEmails[a].ref&&this.state.parsedEmails[a].create(),this.tabArea.replaceChild(this.state.parsedEmails[a].ref,this.tabArea.children[a])):this.tabArea.insertBefore(this.state.parsedEmails[a].create(),this.textboxHandler.getRef());for(;this.state.parsedEmails.length<this.tabArea.children.length-1;)this.tabArea.removeChild(this.textboxHandler.getRef().previousSibling)}}}]),b}(b.a);R.when("A").execute(function(a){(new d.a).setA(a);R.register("multi-email-control",
e.a.register(G))})}])});